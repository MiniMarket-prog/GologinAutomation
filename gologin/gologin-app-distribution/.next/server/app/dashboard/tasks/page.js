(()=>{var e={};e.id=276,e.ids=[276],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2615:e=>{"use strict";e.exports=require("http")},8791:e=>{"use strict";e.exports=require("https")},5315:e=>{"use strict";e.exports=require("path")},8621:e=>{"use strict";e.exports=require("punycode")},6162:e=>{"use strict";e.exports=require("stream")},7360:e=>{"use strict";e.exports=require("url")},1568:e=>{"use strict";e.exports=require("zlib")},6392:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d}),t(3213),t(5124),t(1506),t(5866);var a=t(3191),r=t(8716),l=t(7922),n=t.n(l),o=t(5231),i={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>o[e]);t.d(s,i);let d=["",{children:["dashboard",{children:["tasks",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,3213)),"C:\\Users\\HP\\Documents\\GitHub\\GologinAutomation\\gologin\\app\\dashboard\\tasks\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5124)),"C:\\Users\\HP\\Documents\\GitHub\\GologinAutomation\\gologin\\app\\dashboard\\layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7386))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,1506)),"C:\\Users\\HP\\Documents\\GitHub\\GologinAutomation\\gologin\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,7386))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["C:\\Users\\HP\\Documents\\GitHub\\GologinAutomation\\gologin\\app\\dashboard\\tasks\\page.tsx"],m="/dashboard/tasks/page",u={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/tasks/page",pathname:"/dashboard/tasks",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},2718:(e,s,t)=>{Promise.resolve().then(t.bind(t,7226)),Promise.resolve().then(t.bind(t,2270)),Promise.resolve().then(t.bind(t,6009)),Promise.resolve().then(t.bind(t,1589))},7226:(e,s,t)=>{"use strict";t.d(s,{QueueProcessor:()=>c});var a=t(326),r=t(7577),l=t(772),n=t(3071),o=t(7506),i=t(4893),d=t(4215);function c(){let[e,s]=(0,r.useState)(!1),[t,c]=(0,r.useState)(!1),{toast:m}=(0,d.pm)(),u=async()=>{s(!0);try{let e=await fetch("/api/queue/process",{method:"POST",headers:{"Content-Type":"application/json"}}),s=await e.json();if(!e.ok)throw Error(s.error||"Failed to process queue");m({title:"Queue processed",description:"All pending tasks have been processed successfully."})}catch(e){console.error("[v0] Error processing queue:",e),m({title:"Error",description:e.message||"Failed to process queue",variant:"destructive"})}finally{s(!1)}};return(0,a.jsxs)(n.Zb,{children:[(0,a.jsxs)(n.Ol,{children:[a.jsx(n.ll,{children:"Task Queue Processor"}),a.jsx(n.SZ,{children:"Process pending automation tasks using your saved API key"})]}),(0,a.jsxs)(n.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(l.z,{onClick:u,disabled:e,children:e?(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(i.Z,{className:"mr-2 h-4 w-4"}),"Process Queue Now"]})}),t?a.jsx(l.z,{variant:"destructive",onClick:()=>{c(!1),window.queueInterval&&clearInterval(window.queueInterval)},children:"Stop Auto-Process"}):a.jsx(l.z,{variant:"outline",onClick:()=>{c(!0);let e=setInterval(()=>{u()},6e4);window.queueInterval=e},children:"Start Auto-Process (1 min)"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"The queue processor will execute all pending tasks in order of priority and scheduled time. Auto-process runs every minute while enabled. Make sure you've saved your GoLogin API key in Settings."})]})]})}},2270:(e,s,t)=>{"use strict";t.d(s,{BulkTaskDialog:()=>A});var a=t(326),r=t(7577),l=t(9972),n=t(772),o=t(2288),i=t(1048),d=t(4432),c=t(8051),m=t(3095),u=t(2561),p=t(2067),h=t(3405),x=t(2566),f=t(9815),g=t(5226),j="Checkbox",[y,_]=(0,m.b)(j),[v,b]=y(j),k=r.forwardRef((e,s)=>{let{__scopeCheckbox:t,name:l,checked:n,defaultChecked:o,required:i,disabled:d,value:m="on",onCheckedChange:h,form:x,...f}=e,[j,y]=r.useState(null),_=(0,c.e)(s,e=>y(e)),b=r.useRef(!1),k=!j||x||!!j.closest("form"),[N=!1,w]=(0,p.T)({prop:n,defaultProp:o,onChange:h}),P=r.useRef(N);return r.useEffect(()=>{let e=j?.form;if(e){let s=()=>w(P.current);return e.addEventListener("reset",s),()=>e.removeEventListener("reset",s)}},[j,w]),(0,a.jsxs)(v,{scope:t,state:N,disabled:d,children:[(0,a.jsx)(g.WV.button,{type:"button",role:"checkbox","aria-checked":S(N)?"mixed":N,"aria-required":i,"data-state":F(N),"data-disabled":d?"":void 0,disabled:d,value:m,...f,ref:_,onKeyDown:(0,u.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,u.M)(e.onClick,e=>{w(e=>!!S(e)||!e),k&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),k&&(0,a.jsx)(C,{control:j,bubbles:!b.current,name:l,value:m,checked:N,required:i,disabled:d,form:x,style:{transform:"translateX(-100%)"},defaultChecked:!S(o)&&o})]})});k.displayName=j;var N="CheckboxIndicator",w=r.forwardRef((e,s)=>{let{__scopeCheckbox:t,forceMount:r,...l}=e,n=b(N,t);return(0,a.jsx)(f.z,{present:r||S(n.state)||!0===n.state,children:(0,a.jsx)(g.WV.span,{"data-state":F(n.state),"data-disabled":n.disabled?"":void 0,...l,ref:s,style:{pointerEvents:"none",...e.style}})})});w.displayName=N;var C=e=>{let{control:s,checked:t,bubbles:l=!0,defaultChecked:n,...o}=e,i=r.useRef(null),d=(0,h.D)(t),c=(0,x.t)(s);r.useEffect(()=>{let e=i.current,s=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==t&&s){let a=new Event("click",{bubbles:l});e.indeterminate=S(t),s.call(e,!S(t)&&t),e.dispatchEvent(a)}},[d,t,l]);let m=r.useRef(!S(t)&&t);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n??m.current,...o,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function S(e){return"indeterminate"===e}function F(e){return S(e)?"indeterminate":e?"checked":"unchecked"}var P=t(2933),q=t(7863);let T=r.forwardRef(({className:e,...s},t)=>a.jsx(k,{ref:t,className:(0,q.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...s,children:a.jsx(w,{className:(0,q.cn)("flex items-center justify-center text-current"),children:a.jsx(P.Z,{className:"h-4 w-4"})})}));T.displayName=k.displayName;let E=(0,t(2881).Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);var I=t(5983),D=t(7673);function A(){let[e,s]=(0,r.useState)(!1),[t,c]=(0,r.useState)(!1),{profiles:m}=(0,l.nw)(1,1e3),[u,p]=(0,r.useState)([]),[h,x]=(0,r.useState)("check_inbox"),[f,g]=(0,r.useState)(1),[j,y]=(0,r.useState)({searchFrom:"",replyMessage:""}),[_,v]=(0,r.useState)(""),[b,k]=(0,r.useState)({min:10,max:30}),[N,w]=(0,r.useState)(!0),[C,S]=(0,r.useState)(!1),[F,P]=(0,r.useState)(!1),[q,A]=(0,r.useState)("all"),z=["star_email","read_email","delete_email","reply_to_email"].includes(h),M=(0,r.useMemo)(()=>m?Array.from(new Set(m.map(e=>e.folder_name||"No Folder"))).sort():[],[m]),G=(0,r.useMemo)(()=>m?"all"===q?m:m.filter(e=>(e.folder_name||"No Folder")===q):[],[m,q]),R=e=>{p(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},H=async e=>{e.preventDefault(),c(!0);try{let e={};z&&(e.count=f),"login"===h&&(F?(e.duration=-1,e.waitForManualClose=!0):N?(e.minDuration=b.min,e.maxDuration=b.max):e.duration=b.min),"reply_to_email"===h&&(e={...e,searchFrom:j.searchFrom,replyMessage:j.replyMessage}),"report_to_inbox"===h&&(e={...e,search_query:_}),console.log("[v0] Creating bulk tasks with:",{profile_ids:u,task_type:h,config:e,sequential:C});let t=await fetch("/api/tasks/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_ids:u,task_type:h,config:e,sequential:C})}),a=await t.json();if(!t.ok)throw console.error("[v0] Bulk task creation failed:",a),Error(a.error||"Failed to create bulk tasks");alert(`Created ${a.count} tasks successfully!`),s(!1),p([]),g(1),y({searchFrom:"",replyMessage:""}),v(""),k({min:10,max:30}),w(!0),S(!1),P(!1)}catch(e){console.error("[v0] Error creating bulk tasks:",e),alert(`Failed to create bulk tasks: ${e instanceof Error?e.message:"Unknown error"}`)}finally{c(!1)}};return(0,a.jsxs)(o.Vq,{open:e,onOpenChange:s,children:[a.jsx(o.hg,{asChild:!0,children:(0,a.jsxs)(n.z,{variant:"outline",children:[a.jsx(E,{className:"mr-2 h-4 w-4"}),"Bulk Create"]})}),a.jsx(o.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("form",{onSubmit:H,children:[(0,a.jsxs)(o.fK,{children:[a.jsx(o.$N,{children:"Create Bulk Tasks"}),a.jsx(o.Be,{children:"Create the same task for multiple profiles at once"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"task_type",children:"Task Type"}),(0,a.jsxs)("select",{id:"task_type",value:h,onChange:e=>x(e.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0,children:[a.jsx("option",{value:"login",children:"Login to Gmail"}),a.jsx("option",{value:"check_gmail_status",children:"Check Gmail Status"}),a.jsx("option",{value:"check_inbox",children:"Check Inbox"}),a.jsx("option",{value:"read_email",children:"Read Email"}),a.jsx("option",{value:"star_email",children:"Star Email"}),a.jsx("option",{value:"reply_to_email",children:"Reply to Email from Sender"}),a.jsx("option",{value:"report_to_inbox",children:"Report to Inbox (from Spam)"})]})]}),"login"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(T,{id:"wait_for_manual_close",checked:F,onCheckedChange:e=>P(e)}),a.jsx(i._,{htmlFor:"wait_for_manual_close",className:"font-normal",children:"Keep open until manually closed"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Profile will stay open indefinitely. Close the browser window manually to move to the next profile (works best with sequential mode)."})]}),!F&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(T,{id:"use_random_duration",checked:N,onCheckedChange:e=>w(e)}),a.jsx(i._,{htmlFor:"use_random_duration",className:"font-normal",children:"Use random duration (recommended)"})]})}),N?(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"min_duration",children:"Min Duration (seconds)"}),a.jsx(d.I,{id:"min_duration",type:"number",min:"5",max:"300",value:b.min,onChange:e=>k({...b,min:Number.parseInt(e.target.value)||5}),className:"w-full"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"max_duration",children:"Max Duration (seconds)"}),a.jsx(d.I,{id:"max_duration",type:"number",min:"5",max:"300",value:b.max,onChange:e=>k({...b,max:Number.parseInt(e.target.value)||30}),className:"w-full"})]})]}):(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"fixed_duration",children:"Duration (seconds)"}),a.jsx(d.I,{id:"fixed_duration",type:"number",min:"5",max:"300",value:b.min,onChange:e=>k({...b,min:Number.parseInt(e.target.value)||10}),className:"w-full"})]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"How long to keep each profile open before closing automatically"})]})]}),z&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"bulk_action_count",children:"Number of Actions"}),a.jsx(d.I,{id:"bulk_action_count",type:"number",min:"1",max:"50",value:f,onChange:e=>g(Number.parseInt(e.target.value)||1),placeholder:"How many emails to process",className:"w-full"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["star_email"===h&&"Number of emails to star per profile (starting from the top)","read_email"===h&&"Number of emails to read per profile (starting from the top)","delete_email"===h&&"Number of emails to delete per profile (starting from the top)","reply_to_email"===h&&"Number of emails to reply to from this sender per profile (starting from the most recent)"]})]}),"reply_to_email"===h&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"bulk_search_from",children:"Search From Email"}),a.jsx(d.I,{id:"bulk_search_from",type:"email",value:j.searchFrom,onChange:e=>y({...j,searchFrom:e.target.value}),placeholder:"sender@example.com",className:"w-full",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"The app will search for emails from this sender and reply to them"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"bulk_reply_message",children:"Reply Message"}),a.jsx(D.g,{id:"bulk_reply_message",value:j.replyMessage,onChange:e=>y({...j,replyMessage:e.target.value}),placeholder:"Your reply message...",className:"w-full min-h-24",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"This message will be sent as a reply"})]})]}),"report_to_inbox"===h&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"bulk_report_search_query",children:"Search Query"}),a.jsx(d.I,{id:"bulk_report_search_query",type:"text",value:_,onChange:e=>v(e.target.value),placeholder:"e.g., from:sender@example.com OR subject:Important",className:"w-full",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:'Enter a search query to find the email in spam. Use Gmail search syntax like "from:sender@example.com" or "subject:keyword". The first matching email will be reported as "not spam" and moved to inbox.'})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(T,{id:"sequential_mode",checked:C,onCheckedChange:e=>S(e)}),a.jsx(i._,{htmlFor:"sequential_mode",className:"font-normal",children:"Open profiles sequentially (one at a time)"})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["When enabled, profiles will open one after another instead of all at once.","login"===h&&F?" Each profile will wait for you to close it before opening the next one.":" Each profile will complete before the next one starts."]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(i._,{htmlFor:"folder_filter",children:[a.jsx(I.Z,{className:"inline-block mr-2 h-4 w-4"}),"Filter by Folder"]}),(0,a.jsxs)("select",{id:"folder_filter",value:q,onChange:e=>{A(e.target.value),p([])},className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[(0,a.jsxs)("option",{value:"all",children:["All Folders (",m?.length||0," profiles)"]}),M.map(e=>(0,a.jsxs)("option",{value:e,children:[e," (",m?.filter(s=>(s.folder_name||"No Folder")===e).length||0," profiles)"]},e))]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Filter profiles by folder to easily select profiles from specific teams or groups"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(i._,{children:["Select Profiles (",u.length," selected)"]}),a.jsx(n.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{u.length===G?.length?p([]):p(G?.map(e=>e.id)||[])},children:u.length===G?.length?"Deselect All":"Select All"})]}),(0,a.jsxs)("div",{className:"max-h-64 space-y-2 overflow-y-auto rounded-md border border-input p-4",children:[G?.map(e=>a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(T,{id:e.id,checked:u.includes(e.id),onCheckedChange:()=>R(e.id)}),a.jsxs("label",{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[e.profile_name," ",e.gmail_email&&`(${e.gmail_email})`,e.folder_name&&a.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.folder_name,")"]})]})]},e.id)),G?.length===0&&a.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No profiles in this folder"})]})]})]}),(0,a.jsxs)(o.cN,{children:[a.jsx(n.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),a.jsx(n.z,{type:"submit",disabled:t||0===u.length,children:t?"Creating...":`Create ${u.length} Tasks`})]})]})})]})}},6009:(e,s,t)=>{"use strict";t.d(s,{CreateTaskDialog:()=>x});var a=t(326),r=t(7577),l=t(9972),n=t(772),o=t(2288),i=t(1048),d=t(4432),c=t(3855),m=t(8307),u=t(2933),p=t(7673),h=t(7863);function x(){let[e,s]=(0,r.useState)(!1),[t,x]=(0,r.useState)(!1),[f,g]=(0,r.useState)(""),[j,y]=(0,r.useState)(!1),{profiles:_}=(0,l.nw)(1,1e3,void 0,f),[v,b]=(0,r.useState)({profile_id:"",task_type:"login",config:{}}),k=_?.find(e=>e.id===v.profile_id),[N,w]=(0,r.useState)(1),[C,S]=(0,r.useState)(10),[F,P]=(0,r.useState)({searchFrom:"",replyMessage:""}),[q,T]=(0,r.useState)(""),E=["star_email","read_email","delete_email","reply_to_email"].includes(v.task_type),I=async e=>{e.preventDefault(),x(!0);try{let e={...v.config};E&&(e.count=N),"login"===v.task_type&&(e.duration=C),"reply_to_email"===v.task_type&&(e={...e,searchFrom:F.searchFrom,replyMessage:F.replyMessage}),"report_to_inbox"===v.task_type&&(e={...e,search_query:q});let t=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...v,config:e})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create task")}s(!1),b({profile_id:"",task_type:"login",config:{}}),w(1),S(10),P({searchFrom:"",replyMessage:""}),T(""),window.location.reload()}catch(e){console.error("[v0] Error creating task:",e),alert(`Failed to create task: ${e instanceof Error?e.message:"Unknown error"}`)}finally{x(!1)}};return(0,a.jsxs)(o.Vq,{open:e,onOpenChange:s,children:[a.jsx(o.hg,{asChild:!0,children:(0,a.jsxs)(n.z,{children:[a.jsx(c.Z,{className:"mr-2 h-4 w-4"}),"Create Task"]})}),a.jsx(o.cZ,{className:"max-w-2xl",children:(0,a.jsxs)("form",{onSubmit:I,children:[(0,a.jsxs)(o.fK,{children:[a.jsx(o.$N,{children:"Create Automation Task"}),a.jsx(o.Be,{children:"Schedule a new automation task for a profile"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"profile",children:"Profile"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(m.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(d.I,{type:"text",placeholder:"Search by profile name or folder...",value:f,onChange:e=>{g(e.target.value),y(!0)},onFocus:()=>y(!0),className:"pl-9"})]}),k&&!j&&(0,a.jsxs)("div",{className:"mt-2 rounded-md border border-input bg-muted px-3 py-2 text-sm",children:[a.jsx("span",{className:"font-medium",children:k.profile_name}),k.folder_name&&"No Folder"!==k.folder_name&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:[" (",k.folder_name,")"]})]}),j&&_&&_.length>0&&a.jsx("div",{className:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover shadow-md",children:_.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{b({...v,profile_id:e.id}),y(!1),g("")},className:(0,h.cn)("flex w-full items-center gap-2 px-3 py-2 text-left text-sm hover:bg-accent",v.profile_id===e.id&&"bg-accent"),children:[v.profile_id===e.id&&a.jsx(u.Z,{className:"h-4 w-4"}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("span",{className:"font-medium",children:e.profile_name}),e.folder_name&&"No Folder"!==e.folder_name&&(0,a.jsxs)("span",{className:"text-muted-foreground",children:[" (",e.folder_name,")"]})]})]},e.id))}),j&&_&&0===_.length&&f&&a.jsx("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-popover p-3 text-sm text-muted-foreground shadow-md",children:"No profiles found"})]}),a.jsx("input",{type:"hidden",name:"profile_id",value:v.profile_id,required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"task_type",children:"Task Type"}),(0,a.jsxs)("select",{id:"task_type",value:v.task_type,onChange:e=>b({...v,task_type:e.target.value}),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0,children:[a.jsx("option",{value:"login",children:"Login to Gmail"}),a.jsx("option",{value:"check_gmail_status",children:"Check Gmail Status"}),a.jsx("option",{value:"check_inbox",children:"Check Inbox"}),a.jsx("option",{value:"read_email",children:"Read Email"}),a.jsx("option",{value:"star_email",children:"Star Email"}),a.jsx("option",{value:"send_email",children:"Send Email"}),a.jsx("option",{value:"reply_to_email",children:"Reply to Email from Sender"}),a.jsx("option",{value:"report_to_inbox",children:"Report to Inbox (from Spam)"})]})]}),E&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"action_count",children:"Number of Actions"}),a.jsx(d.I,{id:"action_count",type:"number",min:"1",max:"50",value:N,onChange:e=>w(Number.parseInt(e.target.value)||1),placeholder:"How many emails to process",className:"w-full"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["star_email"===v.task_type&&"Number of emails to star (starting from the top)","read_email"===v.task_type&&"Number of emails to read (starting from the top)","delete_email"===v.task_type&&"Number of emails to delete (starting from the top)","reply_to_email"===v.task_type&&"Number of emails to reply to from this sender (starting from the most recent)"]})]}),"login"===v.task_type&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"login_duration",children:"Keep Profile Open (seconds)"}),a.jsx(d.I,{id:"login_duration",type:"number",min:"5",max:"300",value:C,onChange:e=>S(Number.parseInt(e.target.value)||10),placeholder:"Duration in seconds",className:"w-full"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"How long to keep the profile open before automatically closing (5-300 seconds)"})]}),"reply_to_email"===v.task_type&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"search_from",children:"Sender Name"}),a.jsx(d.I,{id:"search_from",type:"text",value:F.searchFrom,onChange:e=>P({...F,searchFrom:e.target.value}),placeholder:"e.g., Temu, Google, AliExpress",className:"w-full",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter the sender name (not email address). The app will search for emails from this sender and reply to them."})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"reply_message",children:"Reply Message"}),a.jsx(p.g,{id:"reply_message",value:F.replyMessage,onChange:e=>P({...F,replyMessage:e.target.value}),placeholder:"Your reply message...",className:"w-full min-h-24",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"This message will be sent as a reply"})]})]}),"report_to_inbox"===v.task_type&&(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(i._,{htmlFor:"report_search_query",children:"Search Query"}),a.jsx(d.I,{id:"report_search_query",type:"text",value:q,onChange:e=>T(e.target.value),placeholder:"e.g., from:sender@example.com OR subject:Important",className:"w-full",required:!0}),a.jsx("p",{className:"text-xs text-muted-foreground",children:'Enter a search query to find the email in spam. Use Gmail search syntax like "from:sender@example.com" or "subject:keyword". The first matching email will be reported as "not spam" and moved to inbox.'})]})]}),(0,a.jsxs)(o.cN,{children:[a.jsx(n.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),a.jsx(n.z,{type:"submit",disabled:t,children:t?"Creating...":"Create Task"})]})]})})]})}},1589:(e,s,t)=>{"use strict";t.d(s,{TaskList:()=>x});var a=t(326),r=t(7577),l=t(8399),n=t(567),o=t(772),i=t(4432),d=t(5940),c=t(8307),m=t(1291),u=t(8091);let p=e=>fetch(e).then(e=>e.json()),h={pending:"bg-yellow-500",running:"bg-blue-500",completed:"bg-green-500",failed:"bg-red-500"};function x(){let[e,s]=(0,r.useState)("all"),[t,x]=(0,r.useState)(""),{data:f,isLoading:g,mutate:j}=(0,l.ZP)((()=>{let s=new URLSearchParams;return"all"!==e&&s.append("status",e),s.append("limit","100"),t&&s.append("search",t),`/api/tasks?${s.toString()}`})(),p,{refreshInterval:5e3}),y=async e=>{if(confirm("Are you sure you want to delete this task?"))try{await fetch(`/api/tasks/${e}`,{method:"DELETE"}),j()}catch(e){console.error("[v0] Error deleting task:",e)}},_=f?.tasks;return(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center gap-4",children:(0,a.jsxs)("div",{className:"relative flex-1",children:[a.jsx(c.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),a.jsx(i.I,{placeholder:"Search by profile name or folder...",value:t,onChange:e=>x(e.target.value),className:"pl-9"})]})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(o.z,{variant:"all"===e?"default":"outline",size:"sm",onClick:()=>s("all"),children:"All"}),a.jsx(o.z,{variant:"pending"===e?"default":"outline",size:"sm",onClick:()=>s("pending"),children:"Pending"}),a.jsx(o.z,{variant:"running"===e?"default":"outline",size:"sm",onClick:()=>s("running"),children:"Running"}),a.jsx(o.z,{variant:"completed"===e?"default":"outline",size:"sm",onClick:()=>s("completed"),children:"Completed"}),a.jsx(o.z,{variant:"failed"===e?"default":"outline",size:"sm",onClick:()=>s("failed"),children:"Failed"})]}),a.jsx("div",{className:"rounded-md border",children:(0,a.jsxs)(d.iA,{children:[a.jsx(d.xD,{children:(0,a.jsxs)(d.SC,{children:[a.jsx(d.ss,{children:"Task Type"}),a.jsx(d.ss,{children:"Profile Name"}),a.jsx(d.ss,{children:"Folder"}),a.jsx(d.ss,{children:"Status"}),a.jsx(d.ss,{children:"Scheduled"}),a.jsx(d.ss,{children:"Duration"}),a.jsx(d.ss,{className:"w-[100px]",children:"Actions"})]})}),a.jsx(d.RM,{children:g?a.jsx(d.SC,{children:a.jsx(d.pj,{colSpan:7,className:"text-center text-muted-foreground",children:"Loading tasks..."})}):_&&_.length>0?_.map(e=>(0,a.jsxs)(d.SC,{children:[a.jsx(d.pj,{className:"font-medium",children:e.task_type}),a.jsx(d.pj,{className:"text-muted-foreground",children:e.profile_name||"Unknown"}),a.jsx(d.pj,{className:"text-muted-foreground text-sm",children:e.folder_name||"-"}),a.jsx(d.pj,{children:a.jsx(n.C,{className:h[e.status],children:e.status})}),a.jsx(d.pj,{children:e.scheduled_at?new Date(e.scheduled_at).toLocaleString():"-"}),a.jsx(d.pj,{children:e.started_at&&e.completed_at?`${Math.round((new Date(e.completed_at).getTime()-new Date(e.started_at).getTime())/1e3)}s`:"-"}),a.jsx(d.pj,{children:(0,a.jsxs)("div",{className:"flex gap-2",children:["failed"===e.status&&e.error_message&&a.jsx(o.z,{variant:"ghost",size:"icon",title:e.error_message,onClick:()=>{console.log("[v0] Task error details:",{taskId:e.id,taskType:e.task_type,profileName:e.profile_name,error:e.error_message,scheduledAt:e.scheduled_at,startedAt:e.started_at,completedAt:e.completed_at}),alert(`Error: ${e.error_message}`)},children:a.jsx(m.Z,{className:"h-4 w-4 text-red-500"})}),a.jsx(o.z,{variant:"ghost",size:"icon",onClick:()=>y(e.id),children:a.jsx(u.Z,{className:"h-4 w-4"})})]})})]},e.id)):a.jsx(d.SC,{children:a.jsx(d.pj,{colSpan:7,className:"text-center text-muted-foreground",children:"No tasks found"})})})]})})]})}},3071:(e,s,t)=>{"use strict";t.d(s,{Ol:()=>o,SZ:()=>d,Zb:()=>n,aY:()=>c,ll:()=>i});var a=t(326),r=t(7577),l=t(7863);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...s}));n.displayName="Card";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));o.displayName="CardHeader";let i=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("font-semibold leading-none tracking-tight",e),...s}));i.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent",r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s})).displayName="CardFooter"},7673:(e,s,t)=>{"use strict";t.d(s,{g:()=>r});var a=t(326);let r=(0,t(7577).forwardRef)(({label:e,className:s="",...t},r)=>(0,a.jsxs)("div",{className:"flex flex-col w-full",children:[e&&a.jsx("label",{className:"mb-1 text-sm font-medium",children:e}),a.jsx("textarea",{ref:r,className:`border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${s}`,...t})]}));r.displayName="Textarea"},7506:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});let a=(0,t(2881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},3213:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(9510),r=t(8570);let l=(0,r.createProxy)(String.raw`C:\Users\HP\Documents\GitHub\GologinAutomation\gologin\components\tasks\task-list.tsx#TaskList`),n=(0,r.createProxy)(String.raw`C:\Users\HP\Documents\GitHub\GologinAutomation\gologin\components\tasks\create-task-dialog.tsx#CreateTaskDialog`),o=(0,r.createProxy)(String.raw`C:\Users\HP\Documents\GitHub\GologinAutomation\gologin\components\tasks\bulk-task-dialog.tsx#BulkTaskDialog`),i=(0,r.createProxy)(String.raw`C:\Users\HP\Documents\GitHub\GologinAutomation\gologin\components\queue\queue-processor.tsx#QueueProcessor`);function d(){return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Tasks"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage automation tasks"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(o,{}),a.jsx(n,{})]})]}),a.jsx(i,{}),a.jsx(l,{})]})}},3405:(e,s,t)=>{"use strict";t.d(s,{D:()=>r});var a=t(7577);function r(e){let s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}}};var s=require("../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[948,227,936,621,325,629,979,556,452,866],()=>t(6392));module.exports=a})();