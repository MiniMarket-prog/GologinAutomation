"use strict";(()=>{var e={};e.id=2504,e.ids=[2504],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},8288:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>v,requestAsyncStorage:()=>c,routeModule:()=>l,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var o={};r.r(o),r.d(o,{GET:()=>p});var a=r(49303),i=r(88716),s=r(60670),n=r(99064),u=r(87070);async function p(e){try{let t=(0,n.S)(),{searchParams:r}=new URL(e.url),o=Number.parseInt(r.get("page")||"1"),a=Number.parseInt(r.get("limit")||"50"),i=r.get("dateFrom"),s=r.get("dateTo"),p=r.get("profileId"),l=r.get("action"),c=r.get("success"),d=r.get("folder"),g=(o-1)*a;console.log("[v0] Activity API called with filters:",{page:o,limit:a,dateFrom:i,dateTo:s,profileId:p,action:l,success:c,folder:d});let m=t.from("activity_logs").select(`
        *,
        gologin_profiles(profile_name, folder_name, assigned_user_id),
        automation_tasks(created_by)
      `,{count:"exact"}).order("created_at",{ascending:!1});i&&(m=m.gte("created_at",i)),s&&(m=m.lte("created_at",s)),p&&(m=m.eq("profile_id",p)),l&&(m=m.eq("action",l)),null!=c&&""!==c&&(m=m.eq("success","true"===c)),d&&(m=m.eq("gologin_profiles.folder_name",d));let{data:v,error:_,count:h}=await m.range(g,g+a-1);if(console.log("[v0] Activity query result:",{count:h,dataLength:v?.length||0,error:_?.message||null}),_)throw _;return u.NextResponse.json({data:v,pagination:{page:o,limit:a,total:h||0,totalPages:Math.ceil((h||0)/a)}})}catch(e){return console.error("[v0] Error fetching activity:",e),u.NextResponse.json({error:e.message},{status:500})}}let l=new a.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/activity/route",pathname:"/api/activity",filename:"route",bundlePath:"app/api/activity/route"},resolvedPagePath:"D:\\appProject\\GologinAutomation\\gologin\\app\\api\\activity\\route.ts",nextConfigOutput:"standalone",userland:o}),{requestAsyncStorage:c,staticGenerationAsyncStorage:d,serverHooks:g}=l,m="/api/activity/route";function v(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},99064:(e,t,r)=>{r.d(t,{S:()=>i});var o=r(61657);let a=null;function i(){if(a)return a;if(!process.env.SUPABASE_SERVICE_ROLE_KEY)throw Error("SUPABASE_SERVICE_ROLE_KEY is not set");return a=(0,o.eI)("https://umhdnhckxgqywxgpybgo.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{autoRefreshToken:!1,persistSession:!1}})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[8948,4526,5972],()=>r(8288));module.exports=o})();