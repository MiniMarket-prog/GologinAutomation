"use strict";(()=>{var e={};e.id=7645,e.ids=[7645],e.modules={85129:e=>{e.exports=require("gologin")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},32615:e=>{e.exports=require("http")},35240:e=>{e.exports=require("https")},68621:e=>{e.exports=require("punycode")},76162:e=>{e.exports=require("stream")},17360:e=>{e.exports=require("url")},71568:e=>{e.exports=require("zlib")},77250:e=>{e.exports=import("puppeteer-core")},48384:(e,o,r)=>{r.a(e,async(e,s)=>{try{r.r(o),r.d(o,{originalPathname:()=>m,patchFetch:()=>c,requestAsyncStorage:()=>g,routeModule:()=>u,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p});var t=r(49303),l=r(88716),n=r(60670),i=r(17596),a=e([i]);i=(a.then?(await a)():a)[0];let u=new t.AppRouteRouteModule({definition:{kind:l.x.APP_ROUTE,page:"/api/profiles/launch/route",pathname:"/api/profiles/launch",filename:"route",bundlePath:"app/api/profiles/launch/route"},resolvedPagePath:"C:\\Users\\HP\\Documents\\GitHub\\GologinAutomation\\gologin\\app\\api\\profiles\\launch\\route.ts",nextConfigOutput:"standalone",userland:i}),{requestAsyncStorage:g,staticGenerationAsyncStorage:p,serverHooks:d}=u,m="/api/profiles/launch/route";function c(){return(0,n.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:p})}s()}catch(e){s(e)}})},17596:(e,o,r)=>{r.a(e,async(e,s)=>{try{r.r(o),r.d(o,{POST:()=>a});var t=r(87070),l=r(19692),n=r(53541),i=e([n]);async function a(e){try{let{profileId:o}=await e.json();if(!o)return t.NextResponse.json({error:"Profile ID is required"},{status:400});let r=await (0,l.t)(),{data:s,error:i}=await r.from("gologin_profiles").select("*").eq("id",o).single();if(i||!s)return t.NextResponse.json({error:"Profile not found"},{status:404});console.log(`[v0] Launching profile ${s.profile_name} in local mode...`);let a=process.env.GOLOGIN_API_KEY;if(!a)return t.NextResponse.json({error:"GoLogin API key not configured"},{status:500});let c=new n.r(a,"local"),{browser:u,page:g}=await c.launchProfile(s.gologin_id);if(!u)return t.NextResponse.json({error:"Failed to launch browser"},{status:500});console.log("[v0] Opening Gmail in new tab...");let p=await u.newPage();return await p.goto("https://mail.google.com/mail/u/0/#inbox",{waitUntil:"networkidle2",timeout:3e4}),console.log(`[v0] ✓ Gmail opened successfully`),console.log(`[v0] ✓ Profile launched successfully`),console.log("[v0] Browser will stay open until manually closed"),t.NextResponse.json({success:!0,message:"Profile launched successfully. Browser will stay open until you close it manually.",profileName:s.profile_name})}catch(e){return console.error("[v0] Error launching profile:",e),t.NextResponse.json({error:e instanceof Error?e.message:"Failed to launch profile"},{status:500})}}n=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},53541:(e,o,r)=>{r.a(e,async(e,s)=>{try{r.d(o,{r:()=>i});var t=r(77250),l=r(83098),n=e([t]);t=(n.then?(await n)():n)[0];class i{constructor(e,o="cloud"){this.gologinInstance=null,this.gologinAPI=new l.X2(e),this.apiKey=e,this.mode=o}async validateProfile(e){try{return console.log(`[v0] Validating profile ${e} with GoLogin API...`),await this.gologinAPI.getProfileStatus(e),console.log(`[v0] ✓ Profile validation successful`),{valid:!0}}catch(e){if(console.error(`[v0] ❌ Profile validation failed:`,e.message),e.message.includes("404")||e.message.includes("not found")||e.message.includes("deleted"))return{valid:!1,error:"Profile has been deleted from GoLogin",errorType:"PROFILE_DELETED"};if(e.message.includes("401")||e.message.includes("unauthorized"))return{valid:!1,error:"GoLogin API authentication failed",errorType:"AUTH_ERROR"};return{valid:!1,error:`Profile validation failed: ${e.message}`,errorType:"VALIDATION_ERROR"}}}async launchProfile(e){console.log("[v0] ========================================"),console.log(`[v0] Launching GoLogin profile: ${e}`),console.log(`[v0] Mode: ${this.mode.toUpperCase()}`),console.log("[v0] ========================================");try{let o;if("local"===this.mode){console.log("[v0] Step 1: Starting profile locally using GoLogin SDK...");try{let{GologinApi:s}=await Promise.resolve().then(r.t.bind(r,85129,23));this.gologinInstance=s({token:this.apiKey}),console.log("[v0] Launching local profile...");let{browser:t}=await this.gologinInstance.launch({profileId:e});o=t.wsEndpoint(),console.log(`[v0] ✓ Local profile launched`),console.log("[v0] Using LOCAL mode - connecting to local Orbita browser")}catch(e){if(console.error(`[v0] ❌ Failed to load GoLogin SDK for local mode`),console.error(`[v0] Error: ${e.message}`),e.message&&(e.message.includes("404")||e.message.includes("not found")||e.message.includes("deleted")))throw Error("PROFILE_DELETED: Profile has been deleted from GoLogin");throw console.error("[v0] Local mode requires running in a Node.js environment with GoLogin Desktop app installed"),Error("Local mode is not available in this environment. Please use Cloud mode or run the application locally with Node.js.")}}else console.log("[v0] Step 1: Starting profile via GoLogin API..."),await this.gologinAPI.startProfile(e),o=`wss://cloudbrowser.gologin.com/connect?token=${this.apiKey}&profile=${e}`,console.log("[v0] Using CLOUD mode - connecting to GoLogin cloud browser");console.log("[v0] Step 2: Connecting to WebSocket..."),console.log(`[v0] WebSocket URL: ${o.replace(this.apiKey,"***API_KEY***")}`);let s=await t.default.connect({browserWSEndpoint:o,defaultViewport:null,protocolTimeout:3e5});console.log(`[v0] ✓ Connected to browser`),console.log("[v0] Step 3: Getting browser page...");let l=await s.pages();console.log(`[v0] Found ${l.length} open pages`);let n=l[0]||await s.newPage();return console.log("[v0] ========================================"),console.log(`[v0] ✓✓✓ Profile ${e} launched successfully in ${this.mode.toUpperCase()} mode ✓✓✓`),console.log("[v0] ========================================"),{browser:s,page:n,success:!0}}catch(r){console.error("[v0] ========================================"),console.error(`[v0] ❌ Failed to launch profile ${e}`),console.error(`[v0] Error type: ${r.name}`),console.error(`[v0] Error message: ${r.message}`),console.error("[v0] Error stack:",r.stack),console.error("[v0] ========================================");let o=r.message?.startsWith("PROFILE_DELETED:")?"PROFILE_DELETED":"LAUNCH_ERROR";return{browser:null,page:null,success:!1,error:r.message,errorType:o}}}async closeProfile(e,o){console.log(`[v0] Closing profile: ${e}`);try{if(o&&(console.log("[v0] Closing browser..."),await o.close(),console.log(`[v0] ✓ Browser closed`)),"cloud"===this.mode){console.log("[v0] Stopping profile via GoLogin API...");let o=0,r=null;for(;o<3;)try{await this.gologinAPI.stopProfile(e),console.log(`[v0] ✓✓✓ Profile ${e} closed successfully ✓✓✓`);break}catch(e){o++,r=e,console.log(`[v0] Stop attempt ${o}/3 failed: ${e.message}`),o<3&&(console.log("[v0] Waiting 2 seconds before retry..."),await new Promise(e=>setTimeout(e,2e3)))}3===o&&(console.error(`[v0] ⚠️ Could not stop profile via API after 3 attempts`),console.error(`[v0] Last error: ${r?.message}`),console.log("[v0] Profile may need to be manually stopped in GoLogin dashboard"))}else console.log(`[v0] ✓ Profile closed`);return{success:!0}}catch(o){return console.error(`[v0] ❌ Failed to close profile ${e}`),console.error("[v0] Error:",o.message),{success:!1,error:o.message}}}}s()}catch(e){s(e)}})},19692:(e,o,r)=>{r.d(o,{t:()=>l});var s=r(67721),t=r(71615);async function l(){let e=await (0,t.cookies)();return(0,s.createServerClient)("https://umhdnhckxgqywxgpybgo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVtaGRuaGNreGdxeXd4Z3B5YmdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0MDA1NzYsImV4cCI6MjA3NDk3NjU3Nn0.sodO3ZUaTWDxBBZitsrc_j3SUmVWBNlAsQoDAdzs8mI",{cookies:{getAll:()=>e.getAll(),setAll(o){try{o.forEach(({name:o,value:r,options:s})=>e.set(o,r,s))}catch{}}}})}}};var o=require("../../../../webpack-runtime.js");o.C(e);var r=e=>o(o.s=e),s=o.X(0,[8948,4526,9702,5972,3098],()=>r(48384));module.exports=s})();