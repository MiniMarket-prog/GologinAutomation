(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{9532:function(e,a,r){Promise.resolve().then(r.bind(r,2903))},2903:function(e,a,r){"use strict";r.d(a,{ProfileTable:function(){return z}});var s=r(7437),t=r(2265),l=r(5108),n=r(2869),i=r(5186),o=r(5974),d=r(3578),c=r(4190),u=r(2934),h=r(9388),m=r(9322),x=r(9205);let p=(0,x.Z)("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var f=r(3247),j=r(4924),g=r(1723),v=r(7782);let y=(0,x.Z)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var N=r(3276);let w=(0,x.Z)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);var b=r(8930),k=r(6110),S=r(6815),C=r(2339),F=r(3647),E=r(1800),_=r(9397),T=r(1817);let P=(0,x.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var O=r(6818);function I(e){let{onSuccess:a}=e,[r,l]=(0,t.useState)(!1),[o,d]=(0,t.useState)(!1),[c,u]=(0,t.useState)([]),[h,m]=(0,t.useState)(!1),[x,p]=(0,t.useState)(!1),[f,j]=(0,t.useState)([]),[g,v]=(0,t.useState)(!1),[y,N]=(0,t.useState)({email:"",password:"",recovery:"",folderOption:"existing",existingFolder:"",newFolderName:"",autoGenerateFolderName:!1,profileName:"",autoGenerateProfileName:!0,assignToUser:""}),[w,b]=(0,t.useState)({csvData:"",folderOption:"existing",existingFolder:"",newFolderName:"",autoGenerateFolderName:!1}),[I,D]=(0,t.useState)(null);(0,t.useEffect)(()=>{r&&(A(),Z())},[r]);let A=async()=>{m(!0);try{let e=await fetch("/api/folders"),a=await e.json();u(a.folders||[])}catch(e){console.error("[v0] Error loading folders:",e)}finally{m(!1)}},Z=async()=>{try{let e=await fetch("/api/auth/check-admin"),a=await e.json();p(a.isAdmin),a.isAdmin&&M()}catch(e){console.error("[v0] Error checking admin status:",e)}},M=async()=>{v(!0);try{let e=await fetch("/api/users"),a=await e.json();j(a.users||[])}catch(e){console.error("[v0] Error loading users:",e)}finally{v(!1)}},V=()=>{let e=new Date().toISOString().split("T")[0];return"".concat(e,"_").concat("user")},G=e=>e.split("@")[0],z=async e=>{e.preventDefault(),d(!0);try{let e="";e="existing"===y.folderOption?y.existingFolder:y.autoGenerateFolderName?V():y.newFolderName;let r=y.autoGenerateProfileName?G(y.email):y.profileName,s=await fetch("/api/profiles/create-with-setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:y.email,password:y.password,recovery:y.recovery,folderName:e,profileName:r,...y.assignToUser&&{assignToUserEmail:y.assignToUser}})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to create profile")}l(!1),N({email:"",password:"",recovery:"",folderOption:"existing",existingFolder:"",newFolderName:"",autoGenerateFolderName:!1,profileName:"",autoGenerateProfileName:!0,assignToUser:""}),null==a||a()}catch(e){console.error("[v0] Error creating profile:",e),alert(e instanceof Error?e.message:"Failed to create profile")}finally{d(!1)}},U=async e=>{e.preventDefault(),d(!0),D(null);try{let e=w.csvData.trim().split("\n").map(e=>{let[a,r,s]=e.split(",").map(e=>e.trim());return{email:a,password:r,recovery:s}}).filter(e=>e.email&&e.password);if(0===e.length)throw Error("No valid profiles found in CSV data");let r="";r="existing"===w.folderOption?w.existingFolder:w.autoGenerateFolderName?V():w.newFolderName;let s=await fetch("/api/profiles/bulk-create-with-setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profiles:e,folderName:r})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to create profiles")}let t=await s.json();D(t),b({csvData:"",folderOption:"existing",existingFolder:"",newFolderName:"",autoGenerateFolderName:!1}),null==a||a()}catch(e){console.error("[v0] Error creating profiles:",e),alert(e instanceof Error?e.message:"Failed to create profiles")}finally{d(!1)}};return(0,s.jsxs)(k.Vq,{open:r,onOpenChange:l,children:[(0,s.jsx)(k.hg,{asChild:!0,children:(0,s.jsxs)(n.z,{children:[(0,s.jsx)(_.Z,{className:"mr-2 h-4 w-4"}),"Add Profile"]})}),(0,s.jsxs)(k.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(k.fK,{children:[(0,s.jsx)(k.$N,{children:"Add New Profile(s)"}),(0,s.jsx)(k.Be,{children:"Create a single profile or upload multiple profiles from a CSV file."})]}),(0,s.jsxs)(C.mQ,{defaultValue:"single",className:"w-full",children:[(0,s.jsxs)(C.dr,{className:"grid w-full grid-cols-2",children:[(0,s.jsx)(C.SP,{value:"single",children:"Single Profile"}),(0,s.jsx)(C.SP,{value:"bulk",children:"Bulk Upload"})]}),(0,s.jsx)(C.nU,{value:"single",children:(0,s.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[x&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{children:"Assign To User (Optional)"}),(0,s.jsxs)(F.Ph,{value:y.assignToUser,onValueChange:e=>N({...y,assignToUser:e}),disabled:g,children:[(0,s.jsx)(F.i4,{children:(0,s.jsx)(F.ki,{placeholder:g?"Loading users...":"Select user (leave empty for yourself)"})}),(0,s.jsx)(F.Bw,{children:f.map(e=>(0,s.jsx)(F.Ql,{value:e.email,children:e.email},e.id))})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Leave empty to assign to yourself"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{htmlFor:"email",children:"Gmail Email *"}),(0,s.jsx)(i.I,{id:"email",type:"email",value:y.email,onChange:e=>N({...y,email:e.target.value}),required:!0,placeholder:"example@gmail.com"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{htmlFor:"password",children:"Gmail Password *"}),(0,s.jsx)(i.I,{id:"password",type:"password",value:y.password,onChange:e=>N({...y,password:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{htmlFor:"recovery",children:"Recovery Email"}),(0,s.jsx)(i.I,{id:"recovery",type:"email",value:y.recovery,onChange:e=>N({...y,recovery:e.target.value}),placeholder:"recovery@email.com"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{children:"Folder"}),(0,s.jsxs)(F.Ph,{value:y.folderOption,onValueChange:e=>N({...y,folderOption:e}),children:[(0,s.jsx)(F.i4,{children:(0,s.jsx)(F.ki,{})}),(0,s.jsxs)(F.Bw,{children:[(0,s.jsx)(F.Ql,{value:"existing",children:"Use Existing Folder"}),(0,s.jsx)(F.Ql,{value:"new",children:"Create New Folder"})]})]})]}),"existing"===y.folderOption?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{children:"Select Folder *"}),(0,s.jsxs)(F.Ph,{value:y.existingFolder,onValueChange:e=>N({...y,existingFolder:e}),disabled:h,children:[(0,s.jsx)(F.i4,{children:(0,s.jsx)(F.ki,{placeholder:h?"Loading...":"Select a folder"})}),(0,s.jsx)(F.Bw,{children:c.map(e=>(0,s.jsx)(F.Ql,{value:e,children:e},e||"no-folder"))})]})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(E.X,{id:"autoFolder",checked:y.autoGenerateFolderName,onCheckedChange:e=>N({...y,autoGenerateFolderName:e})}),(0,s.jsx)(S._,{htmlFor:"autoFolder",className:"text-sm font-normal",children:"Auto-generate folder name (YYYY-MM-DD_username)"})]}),!y.autoGenerateFolderName&&(0,s.jsx)(i.I,{placeholder:"Enter folder name",value:y.newFolderName,onChange:e=>N({...y,newFolderName:e.target.value}),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(E.X,{id:"autoProfile",checked:y.autoGenerateProfileName,onCheckedChange:e=>N({...y,autoGenerateProfileName:e})}),(0,s.jsx)(S._,{htmlFor:"autoProfile",className:"text-sm font-normal",children:"Auto-generate profile name from email"})]}),!y.autoGenerateProfileName&&(0,s.jsx)(i.I,{placeholder:"Enter profile name",value:y.profileName,onChange:e=>N({...y,profileName:e.target.value}),required:!0})]}),(0,s.jsxs)(k.cN,{children:[(0,s.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,s.jsx)(n.z,{type:"submit",disabled:o,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):"Create Profile"})]})]})}),(0,s.jsx)(C.nU,{value:"bulk",children:(0,s.jsxs)("form",{onSubmit:U,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{htmlFor:"csvData",children:"CSV Data *"}),(0,s.jsx)(O.g,{id:"csvData",value:w.csvData,onChange:e=>b({...w,csvData:e.target.value}),placeholder:"email1@gmail.com,password123,recovery1@email.com email2@gmail.com,password456,recovery2@email.com",rows:8,required:!0}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Format: email,password,recovery (one per line)"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{children:"Folder"}),(0,s.jsxs)(F.Ph,{value:w.folderOption,onValueChange:e=>b({...w,folderOption:e}),children:[(0,s.jsx)(F.i4,{children:(0,s.jsx)(F.ki,{})}),(0,s.jsxs)(F.Bw,{children:[(0,s.jsx)(F.Ql,{value:"existing",children:"Use Existing Folder"}),(0,s.jsx)(F.Ql,{value:"new",children:"Create New Folder"})]})]})]}),"existing"===w.folderOption?(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(S._,{children:"Select Folder *"}),(0,s.jsxs)(F.Ph,{value:w.existingFolder,onValueChange:e=>b({...w,existingFolder:e}),disabled:h,children:[(0,s.jsx)(F.i4,{children:(0,s.jsx)(F.ki,{placeholder:h?"Loading...":"Select a folder"})}),(0,s.jsx)(F.Bw,{children:c.map(e=>(0,s.jsx)(F.Ql,{value:e,children:e},e||"no-folder"))})]})]}):(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(E.X,{id:"autoBulkFolder",checked:w.autoGenerateFolderName,onCheckedChange:e=>b({...w,autoGenerateFolderName:e})}),(0,s.jsx)(S._,{htmlFor:"autoBulkFolder",className:"text-sm font-normal",children:"Auto-generate folder name (YYYY-MM-DD_username)"})]}),!w.autoGenerateFolderName&&(0,s.jsx)(i.I,{placeholder:"Enter folder name",value:w.newFolderName,onChange:e=>b({...w,newFolderName:e.target.value}),required:!0})]}),I&&(0,s.jsxs)("div",{className:"rounded-lg border p-4 space-y-2",children:[(0,s.jsx)("h4",{className:"font-semibold",children:"Upload Results"}),(0,s.jsxs)("p",{className:"text-sm",children:[(0,s.jsxs)("span",{className:"text-green-600",children:["Created: ",I.created]})," | ",(0,s.jsxs)("span",{className:"text-red-600",children:["Failed: ",I.failed]})]}),I.errors.length>0&&(0,s.jsxs)("div",{className:"text-sm text-red-600 space-y-1",children:[(0,s.jsx)("p",{className:"font-medium",children:"Errors:"}),I.errors.map((e,a)=>(0,s.jsxs)("p",{children:["• ",e]},a))]})]}),(0,s.jsxs)(k.cN,{children:[(0,s.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,s.jsx)(n.z,{type:"submit",disabled:o,children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(P,{className:"mr-2 h-4 w-4"}),"Upload Profiles"]})})]})]})})]})]})]})}var D=r(7168),A=r(5153);function Z(e){let{onSuccess:a}=e,[r,l]=(0,t.useState)(!1),[i,o]=(0,t.useState)(!1),{toast:d}=(0,A.pm)(),c=async()=>{o(!0);try{let e=await fetch("/api/profiles/sync",{method:"POST",headers:{"Content-Type":"application/json"}}),r=await e.json();if(!e.ok)throw Error(r.error||"Failed to sync profiles");d({title:"Profiles synced",description:r.message}),l(!1),null==a||a()}catch(e){console.error("[v0] Error syncing profiles:",e),d({title:"Error",description:e.message||"Failed to sync profiles",variant:"destructive"})}finally{o(!1)}};return(0,s.jsxs)(k.Vq,{open:r,onOpenChange:l,children:[(0,s.jsx)(k.hg,{asChild:!0,children:(0,s.jsxs)(n.z,{variant:"outline",children:[(0,s.jsx)(D.Z,{className:"mr-2 h-4 w-4"}),"Sync from GoLogin"]})}),(0,s.jsxs)(k.cZ,{children:[(0,s.jsxs)(k.fK,{children:[(0,s.jsx)(k.$N,{children:"Sync Profiles from GoLogin"}),(0,s.jsx)(k.Be,{children:"Import all your GoLogin profiles automatically. This will only add new profiles and won't affect existing ones. Make sure you've saved your API key in Settings first."})]}),(0,s.jsxs)(k.cN,{children:[(0,s.jsx)(n.z,{type:"button",variant:"outline",onClick:()=>l(!1),children:"Cancel"}),(0,s.jsx)(n.z,{onClick:c,disabled:i,children:i?"Syncing...":"Sync Profiles"})]})]})]})}var M=r(970);let V={idle:"bg-gray-500",running:"bg-green-500",paused:"bg-yellow-500",error:"bg-red-500",deleted:"bg-gray-400"},G={ok:{color:"bg-green-500",icon:u.Z,label:"OK"},blocked:{color:"bg-red-500",icon:h.Z,label:"Blocked"},password_required:{color:"bg-orange-500",icon:m.Z,label:"Password Required"},verification_required:{color:"bg-yellow-500",icon:m.Z,label:"Verification Required"},error:{color:"bg-red-500",icon:h.Z,label:"Error"},unknown:{color:"bg-gray-500",icon:p,label:"Unknown"}};function z(){let[e,a]=(0,t.useState)(1),[r,u]=(0,t.useState)(""),[h,m]=(0,t.useState)(),[x,p]=(0,t.useState)(),[k,S]=(0,t.useState)(),[C,F]=(0,t.useState)([]),[E,_]=(0,t.useState)(new Set),[T,P]=(0,t.useState)(!1),{profiles:O,total:D,totalPages:A,isLoading:z,mutate:U}=(0,l.nw)(e,50,h,r,x,k);(0,t.useEffect)(()=>{(async()=>{let e=(0,M.O)(),{data:{user:a}}=await e.auth.getUser();if(a){let{data:r}=await e.from("users").select("role").eq("email",a.email).single();P((null==r?void 0:r.role)==="admin")}})()},[]),(0,t.useEffect)(()=>{fetch("/api/folders").then(e=>e.json()).then(e=>{F(e.folders||[])}).catch(e=>console.error("[v0] Error fetching folders:",e))},[]),(0,t.useEffect)(()=>{let e=()=>{console.log("[v0] Profiles refresh triggered by task completion"),U()};return window.addEventListener("profiles-refresh",e),()=>window.removeEventListener("profiles-refresh",e)},[U]);let R=async e=>{if(confirm("Are you sure you want to delete this profile?"))try{if(!(await fetch("/api/profiles/".concat(e),{method:"DELETE"})).ok)throw Error("Failed to delete profile");U()}catch(e){console.error("[v0] Error deleting profile:",e),alert("Failed to delete profile")}},q=async(e,a)=>{try{if(!(await fetch("/api/profiles/".concat(e),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:a})})).ok)throw Error("Failed to update status");U()}catch(e){console.error("[v0] Error updating status:",e),alert("Failed to update status")}},L=async e=>{_(a=>new Set(a).add(e));try{let a=await fetch("/api/profiles/launch",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profileId:e})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to launch profile")}await a.json(),alert("Profile launched successfully!\n\nBrowser will stay open until you close it manually.")}catch(e){console.error("[v0] Error launching profile:",e),alert("Failed to launch profile: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{_(a=>{let r=new Set(a);return r.delete(e),r})}};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(f.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,s.jsx)(i.I,{placeholder:"Search profiles by name or email...",value:r,onChange:e=>u(e.target.value),className:"pl-9"})]}),(0,s.jsxs)("select",{value:k||"all",onChange:e=>S("all"===e.target.value?void 0:e.target.value),className:"rounded-md border border-input bg-background px-3 py-2 text-sm min-w-[180px]",children:[(0,s.jsx)("option",{value:"all",children:"All Folders"}),C.map(e=>(0,s.jsxs)("option",{value:e,children:["\uD83D\uDCC1 ",e]},e||"no-folder"))]}),(0,s.jsxs)("select",{value:h||"all",onChange:e=>m("all"===e.target.value?void 0:e.target.value),className:"rounded-md border border-input bg-background px-3 py-2 text-sm",children:[(0,s.jsx)("option",{value:"all",children:"All Status"}),(0,s.jsx)("option",{value:"idle",children:"Idle"}),(0,s.jsx)("option",{value:"running",children:"Running"}),(0,s.jsx)("option",{value:"paused",children:"Paused"}),(0,s.jsx)("option",{value:"error",children:"Error"}),(0,s.jsx)("option",{value:"deleted",children:"Deleted"})]}),(0,s.jsxs)("select",{value:x||"all",onChange:e=>p("all"===e.target.value?void 0:e.target.value),className:"rounded-md border border-input bg-background px-3 py-2 text-sm min-w-[180px]",children:[(0,s.jsx)("option",{value:"all",children:"All Gmail Status"}),(0,s.jsx)("option",{value:"ok",children:"✓ OK"}),(0,s.jsx)("option",{value:"blocked",children:"✗ Blocked"}),(0,s.jsx)("option",{value:"password_required",children:"⚠ Password Required"}),(0,s.jsx)("option",{value:"verification_required",children:"⚠ Verification Required"}),(0,s.jsx)("option",{value:"error",children:"✗ Error"}),(0,s.jsx)("option",{value:"unknown",children:"? Unknown"}),(0,s.jsx)("option",{value:"unchecked",children:"Not Checked"})]})]}),(0,s.jsxs)("div",{className:"flex gap-2 ml-4",children:[T&&(0,s.jsx)(Z,{onSuccess:U}),(0,s.jsx)(I,{})]})]}),(0,s.jsx)("div",{className:"rounded-md border",children:(0,s.jsxs)(d.iA,{children:[(0,s.jsx)(d.xD,{children:(0,s.jsxs)(d.SC,{children:[(0,s.jsx)(d.ss,{children:"Profile Name"}),(0,s.jsx)(d.ss,{children:"Folder"}),(0,s.jsx)(d.ss,{children:"Gmail Email"}),(0,s.jsx)(d.ss,{children:"Gmail Status"}),(0,s.jsx)(d.ss,{children:"Status"}),(0,s.jsx)(d.ss,{children:"Last Run"}),(0,s.jsx)(d.ss,{className:"w-[80px]",children:"Actions"})]})}),(0,s.jsx)(d.RM,{children:z?(0,s.jsx)(d.SC,{children:(0,s.jsx)(d.pj,{colSpan:7,className:"text-center text-muted-foreground",children:"Loading profiles..."})}):O&&O.length>0?O.map(e=>{let a=G[e.gmail_status||"unknown"]||G.unknown,r=a.icon,t=E.has(e.id);return(0,s.jsxs)(d.SC,{children:[(0,s.jsx)(d.pj,{className:"font-medium",children:e.profile_name}),(0,s.jsx)(d.pj,{children:e.folder_name?(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-muted-foreground",children:[(0,s.jsx)(j.Z,{className:"h-3.5 w-3.5"}),(0,s.jsx)("span",{className:"text-sm",children:e.folder_name})]}):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"-"})}),(0,s.jsx)(d.pj,{children:e.gmail_email||"-"}),(0,s.jsx)(d.pj,{children:e.gmail_status?(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r,{className:"h-4 w-4"}),(0,s.jsx)(o.C,{className:a.color,children:a.label})]}),e.gmail_status_checked_at&&(0,s.jsxs)("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[(0,s.jsx)(g.Z,{className:"h-3 w-3"}),new Date(e.gmail_status_checked_at).toLocaleString()]}),e.gmail_status_message&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground max-w-[200px] truncate",title:e.gmail_status_message,children:e.gmail_status_message})]}):(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"Not checked"})}),(0,s.jsx)(d.pj,{children:(0,s.jsx)(o.C,{className:V[e.status],children:e.status})}),(0,s.jsx)(d.pj,{children:e.last_run?new Date(e.last_run).toLocaleString():"Never"}),(0,s.jsx)(d.pj,{children:(0,s.jsxs)(c.h_,{children:[(0,s.jsx)(c.$F,{asChild:!0,children:(0,s.jsx)(n.z,{variant:"ghost",size:"icon",children:(0,s.jsx)(v.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(c.AW,{align:"end",children:[(0,s.jsxs)(c.Xi,{onClick:()=>L(e.id),disabled:t,children:[(0,s.jsx)(y,{className:"mr-2 h-4 w-4"}),t?"Launching...":"Launch in Local Mode"]}),"idle"===e.status&&(0,s.jsxs)(c.Xi,{onClick:()=>q(e.id,"running"),children:[(0,s.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),"Start"]}),"running"===e.status&&(0,s.jsxs)(c.Xi,{onClick:()=>q(e.id,"paused"),children:[(0,s.jsx)(w,{className:"mr-2 h-4 w-4"}),"Pause"]}),(0,s.jsxs)(c.Xi,{onClick:()=>R(e.id),className:"text-red-600",children:[(0,s.jsx)(b.Z,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},e.id)}):(0,s.jsx)(d.SC,{children:(0,s.jsx)(d.pj,{colSpan:7,className:"text-center text-muted-foreground",children:"No profiles found"})})})]})}),A&&A>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Showing ",(null==O?void 0:O.length)||0," of ",D||0," profiles"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(n.z,{variant:"outline",size:"sm",disabled:1===e,onClick:()=>a(e-1),children:"Previous"}),(0,s.jsx)(n.z,{variant:"outline",size:"sm",disabled:e===A,onClick:()=>a(e+1),children:"Next"})]})]})]})}},2339:function(e,a,r){"use strict";r.d(a,{SP:function(){return d},dr:function(){return o},mQ:function(){return i},nU:function(){return c}});var s=r(7437),t=r(2265),l=r(271),n=r(4508);let i=l.fC,o=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.aV,{ref:a,className:(0,n.cn)("inline-flex items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",r),...t})});o.displayName=l.aV.displayName;let d=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.xz,{ref:a,className:(0,n.cn)("inline-flex min-w-[100px] items-center justify-center rounded-md px-3 py-1.5 text-sm font-medium transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...t})});d.displayName=l.xz.displayName;let c=t.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(l.VY,{ref:a,className:(0,n.cn)("mt-2 rounded-lg border border-border bg-card p-4 text-sm shadow-sm",r),...t})});c.displayName=l.VY.displayName},6818:function(e,a,r){"use strict";r.d(a,{g:function(){return t}});var s=r(7437);let t=(0,r(2265).forwardRef)((e,a)=>{let{label:r,className:t="",...l}=e;return(0,s.jsxs)("div",{className:"flex flex-col w-full",children:[r&&(0,s.jsx)("label",{className:"mb-1 text-sm font-medium",children:r}),(0,s.jsx)("textarea",{ref:a,className:"border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(t),...l})]})});t.displayName="Textarea"},5153:function(e,a,r){"use strict";r.d(a,{pm:function(){return h}});var s=r(2265);let t=0,l=new Map,n=e=>{if(l.has(e))return;let a=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);l.set(e,a)},i=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=a;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},o=[],d={toasts:[]};function c(e){d=i(d,e),o.forEach(e=>{e(d)})}function u(e){let{...a}=e,r=(t=(t+1)%Number.MAX_SAFE_INTEGER).toString();return c({type:"ADD_TOAST",toast:{...a,id:r}}),{id:r,dismiss:()=>c({type:"DISMISS_TOAST",toastId:r}),update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function h(){let[e,a]=s.useState(d);return s.useEffect(()=>(o.push(a),()=>{let e=o.indexOf(a);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5108:function(e,a,r){"use strict";r.d(a,{nw:function(){return l}});var s=r(7086);let t=e=>fetch(e).then(e=>e.json());function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,r=arguments.length>2?arguments[2]:void 0,l=arguments.length>3?arguments[3]:void 0,n=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,o=new URLSearchParams({page:e.toString(),limit:a.toString(),...r&&{status:r},...l&&{search:l},...n&&{gmailStatus:n},...i&&{folder:i}}),{data:d,error:c,isLoading:u,mutate:h}=(0,s.ZP)("/api/profiles?".concat(o),t,{refreshInterval:5e3});return{profiles:null==d?void 0:d.profiles,total:null==d?void 0:d.total,totalPages:null==d?void 0:d.totalPages,isLoading:u,error:c,mutate:h}}},970:function(e,a,r){"use strict";r.d(a,{O:function(){return l}});var s=r(7272);let t=null;function l(){return t||(t=(0,s.createBrowserClient)("https://umhdnhckxgqywxgpybgo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVtaGRuaGNreGdxeXd4Z3B5YmdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0MDA1NzYsImV4cCI6MjA3NDk3NjU3Nn0.sodO3ZUaTWDxBBZitsrc_j3SUmVWBNlAsQoDAdzs8mI"))}},2934:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(9205).Z)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},9388:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(9205).Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1723:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(9205).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},7168:function(e,a,r){"use strict";r.d(a,{Z:function(){return s}});let s=(0,r(9205).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},271:function(e,a,r){"use strict";r.d(a,{VY:function(){return P},aV:function(){return _},fC:function(){return E},xz:function(){return T}});var s=r(2265),t=r(6741),l=r(3966),n=r(1353),i=r(1599),o=r(6840),d=r(9114),c=r(886),u=r(9255),h=r(7437),m="Tabs",[x,p]=(0,l.b)(m,[n.Pc]),f=(0,n.Pc)(),[j,g]=x(m),v=s.forwardRef((e,a)=>{let{__scopeTabs:r,value:s,onValueChange:t,defaultValue:l,orientation:n="horizontal",dir:i,activationMode:m="automatic",...x}=e,p=(0,d.gm)(i),[f,g]=(0,c.T)({prop:s,onChange:t,defaultProp:l});return(0,h.jsx)(j,{scope:r,baseId:(0,u.M)(),value:f,onValueChange:g,orientation:n,dir:p,activationMode:m,children:(0,h.jsx)(o.WV.div,{dir:p,"data-orientation":n,...x,ref:a})})});v.displayName=m;var y="TabsList",N=s.forwardRef((e,a)=>{let{__scopeTabs:r,loop:s=!0,...t}=e,l=g(y,r),i=f(r);return(0,h.jsx)(n.fC,{asChild:!0,...i,orientation:l.orientation,dir:l.dir,loop:s,children:(0,h.jsx)(o.WV.div,{role:"tablist","aria-orientation":l.orientation,...t,ref:a})})});N.displayName=y;var w="TabsTrigger",b=s.forwardRef((e,a)=>{let{__scopeTabs:r,value:s,disabled:l=!1,...i}=e,d=g(w,r),c=f(r),u=C(d.baseId,s),m=F(d.baseId,s),x=s===d.value;return(0,h.jsx)(n.ck,{asChild:!0,...c,focusable:!l,active:x,children:(0,h.jsx)(o.WV.button,{type:"button",role:"tab","aria-selected":x,"aria-controls":m,"data-state":x?"active":"inactive","data-disabled":l?"":void 0,disabled:l,id:u,...i,ref:a,onMouseDown:(0,t.M)(e.onMouseDown,e=>{l||0!==e.button||!1!==e.ctrlKey?e.preventDefault():d.onValueChange(s)}),onKeyDown:(0,t.M)(e.onKeyDown,e=>{[" ","Enter"].includes(e.key)&&d.onValueChange(s)}),onFocus:(0,t.M)(e.onFocus,()=>{let e="manual"!==d.activationMode;x||l||!e||d.onValueChange(s)})})})});b.displayName=w;var k="TabsContent",S=s.forwardRef((e,a)=>{let{__scopeTabs:r,value:t,forceMount:l,children:n,...d}=e,c=g(k,r),u=C(c.baseId,t),m=F(c.baseId,t),x=t===c.value,p=s.useRef(x);return s.useEffect(()=>{let e=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,h.jsx)(i.z,{present:l||x,children:r=>{let{present:s}=r;return(0,h.jsx)(o.WV.div,{"data-state":x?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!s,id:m,tabIndex:0,...d,ref:a,style:{...e.style,animationDuration:p.current?"0s":void 0},children:s&&n})}})});function C(e,a){return"".concat(e,"-trigger-").concat(a)}function F(e,a){return"".concat(e,"-content-").concat(a)}S.displayName=k;var E=v,_=N,T=b,P=S}},function(e){e.O(0,[137,481,669,162,908,839,763,259,971,117,744],function(){return e(e.s=9532)}),_N_E=e.O()}]);