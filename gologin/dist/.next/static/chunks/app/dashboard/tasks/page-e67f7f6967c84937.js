(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{8093:function(e,t,s){Promise.resolve().then(s.bind(s,1978)),Promise.resolve().then(s.bind(s,423)),Promise.resolve().then(s.bind(s,6647)),Promise.resolve().then(s.bind(s,9147))},1978:function(e,t,s){"use strict";s.d(t,{QueueProcessor:function(){return m}});var r=s(7437),a=s(2265),n=s(2869),l=s(6070),o=s(1817),i=s(3276),d=s(1641),c=s(8930),u=s(5153);function m(){let[e,t]=(0,a.useState)(!1),[s,m]=(0,a.useState)(!1),[p,f]=(0,a.useState)(!1),[h,x]=(0,a.useState)(!1),{toast:g}=(0,u.pm)(),y=async()=>{t(!0);try{let e=await fetch("/api/queue/process",{method:"POST",headers:{"Content-Type":"application/json"}}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to process queue");g({title:"Queue processed",description:"All pending tasks have been processed successfully."})}catch(e){console.error("[v0] Error processing queue:",e),g({title:"Error",description:e.message||"Failed to process queue",variant:"destructive"})}finally{t(!1)}},j=async()=>{if(confirm("Are you sure you want to clear all pending tasks? This action cannot be undone.")){m(!0);try{let e=await fetch("/api/tasks/clear-pending",{method:"DELETE"}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to clear pending tasks");g({title:"Pending tasks cleared",description:t.message||"All pending tasks have been removed."}),window.location.reload()}catch(e){console.error("[v0] Error clearing pending tasks:",e),g({title:"Error",description:e.message||"Failed to clear pending tasks",variant:"destructive"})}finally{m(!1)}}},v=async()=>{f(!0);try{let e=await fetch("/api/queue/stop",{method:"POST"});await e.json();let t=await fetch("/api/tasks/stop-running",{method:"POST"});await t.json(),g({title:"Stop requested",description:"Queue will stop after current task completes"})}catch(e){console.error("[v0] Error stopping queue:",e),g({title:"Error",description:e.message||"Failed to stop queue",variant:"destructive"})}finally{f(!1)}};return(0,r.jsxs)(l.Zb,{children:[(0,r.jsxs)(l.Ol,{children:[(0,r.jsx)(l.ll,{children:"Task Queue Processor"}),(0,r.jsx)(l.SZ,{children:"Process pending automation tasks using your saved API key"})]}),(0,r.jsxs)(l.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(n.z,{onClick:y,disabled:e,children:e?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Z,{className:"mr-2 h-4 w-4"}),"Process Queue Now"]})}),h?(0,r.jsx)(n.z,{variant:"destructive",onClick:()=>{x(!1),window.queueInterval&&clearInterval(window.queueInterval)},children:"Stop Auto-Process"}):(0,r.jsx)(n.z,{variant:"outline",onClick:()=>{x(!0);let e=setInterval(()=>{y()},6e4);window.queueInterval=e},children:"Start Auto-Process (1 min)"}),(0,r.jsx)(n.z,{variant:"destructive",onClick:v,disabled:p,children:p?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Stopping..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{className:"mr-2 h-4 w-4"}),"Stop Queue"]})}),(0,r.jsx)(n.z,{variant:"outline",onClick:j,disabled:s,className:"ml-auto bg-transparent",children:s?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Clearing..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Clear Pending Tasks"]})})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:'The queue processor will execute all pending tasks in order of priority and scheduled time. Auto-process runs every minute while enabled. Use "Stop Queue" to abort processing after the current task completes.'})]})]})}},423:function(e,t,s){"use strict";s.d(t,{BulkTaskDialog:function(){return f}});var r=s(7437),a=s(2265),n=s(5108),l=s(2869),o=s(6110),i=s(6815),d=s(5186),c=s(1800);let u=(0,s(9205).Z)("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);var m=s(4924),p=s(6818);function f(){let[e,t]=(0,a.useState)(!1),[s,f]=(0,a.useState)(!1),{profiles:h}=(0,n.nw)(1,1e3),[x,g]=(0,a.useState)([]),[y,j]=(0,a.useState)("check_inbox"),[v,b]=(0,a.useState)(1),[N,_]=(0,a.useState)({searchFrom:"",replyMessage:""}),[w,k]=(0,a.useState)(""),[S,C]=(0,a.useState)({min:10,max:30}),[T,F]=(0,a.useState)(!0),[E,z]=(0,a.useState)(!1),[R,I]=(0,a.useState)(!1),[M,P]=(0,a.useState)("all"),D=["star_email","read_email","delete_email","reply_to_email"].includes(y),q=(0,a.useMemo)(()=>h?Array.from(new Set(h.map(e=>e.folder_name||"No Folder"))).sort():[],[h]),A=(0,a.useMemo)(()=>h?"all"===M?h:h.filter(e=>(e.folder_name||"No Folder")===M):[],[h,M]),O=e=>{g(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Z=async e=>{e.preventDefault(),f(!0);try{let e={};D&&(e.count=v),"login"===y&&(R?(e.duration=-1,e.waitForManualClose=!0):T?(e.minDuration=S.min,e.maxDuration=S.max):e.duration=S.min),"reply_to_email"===y&&(e={...e,searchFrom:N.searchFrom,replyMessage:N.replyMessage}),"report_to_inbox"===y&&(e={...e,search_query:w}),console.log("[v0] Creating bulk tasks with:",{profile_ids:x,task_type:y,config:e,sequential:E});let s=await fetch("/api/tasks/bulk",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({profile_ids:x,task_type:y,config:e,sequential:E})}),r=await s.json();if(!s.ok)throw console.error("[v0] Bulk task creation failed:",r),Error(r.error||"Failed to create bulk tasks");alert("Created ".concat(r.count," tasks successfully!")),t(!1),g([]),b(1),_({searchFrom:"",replyMessage:""}),k(""),C({min:10,max:30}),F(!0),z(!1),I(!1)}catch(e){console.error("[v0] Error creating bulk tasks:",e),alert("Failed to create bulk tasks: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{f(!1)}};return(0,r.jsxs)(o.Vq,{open:e,onOpenChange:t,children:[(0,r.jsx)(o.hg,{asChild:!0,children:(0,r.jsxs)(l.z,{variant:"outline",children:[(0,r.jsx)(u,{className:"mr-2 h-4 w-4"}),"Bulk Create"]})}),(0,r.jsx)(o.cZ,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,r.jsxs)("form",{onSubmit:Z,children:[(0,r.jsxs)(o.fK,{children:[(0,r.jsx)(o.$N,{children:"Create Bulk Tasks"}),(0,r.jsx)(o.Be,{children:"Create the same task for multiple profiles at once"})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"task_type",children:"Task Type"}),(0,r.jsxs)("select",{id:"task_type",value:y,onChange:e=>j(e.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0,children:[(0,r.jsx)("option",{value:"login",children:"Login to Gmail"}),(0,r.jsx)("option",{value:"check_gmail_status",children:"Check Gmail Status"}),(0,r.jsx)("option",{value:"check_inbox",children:"Check Inbox"}),(0,r.jsx)("option",{value:"read_email",children:"Read Email"}),(0,r.jsx)("option",{value:"star_email",children:"Star Email"}),(0,r.jsx)("option",{value:"reply_to_email",children:"Reply to Email from Sender"}),(0,r.jsx)("option",{value:"report_to_inbox",children:"Report to Inbox (from Spam)"})]})]}),"login"===y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.X,{id:"wait_for_manual_close",checked:R,onCheckedChange:e=>I(e)}),(0,r.jsx)(i._,{htmlFor:"wait_for_manual_close",className:"font-normal",children:"Keep open until manually closed"})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Profile will stay open indefinitely. Close the browser window manually to move to the next profile (works best with sequential mode)."})]}),!R&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.X,{id:"use_random_duration",checked:T,onCheckedChange:e=>F(e)}),(0,r.jsx)(i._,{htmlFor:"use_random_duration",className:"font-normal",children:"Use random duration (recommended)"})]})}),T?(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"min_duration",children:"Min Duration (seconds)"}),(0,r.jsx)(d.I,{id:"min_duration",type:"number",min:"5",max:"300",value:S.min,onChange:e=>C({...S,min:Number.parseInt(e.target.value)||5}),className:"w-full"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"max_duration",children:"Max Duration (seconds)"}),(0,r.jsx)(d.I,{id:"max_duration",type:"number",min:"5",max:"300",value:S.max,onChange:e=>C({...S,max:Number.parseInt(e.target.value)||30}),className:"w-full"})]})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"fixed_duration",children:"Duration (seconds)"}),(0,r.jsx)(d.I,{id:"fixed_duration",type:"number",min:"5",max:"300",value:S.min,onChange:e=>C({...S,min:Number.parseInt(e.target.value)||10}),className:"w-full"})]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"How long to keep each profile open before closing automatically"})]})]}),D&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"bulk_action_count",children:"Number of Actions"}),(0,r.jsx)(d.I,{id:"bulk_action_count",type:"number",min:"1",max:"50",value:v,onChange:e=>b(Number.parseInt(e.target.value)||1),placeholder:"How many emails to process",className:"w-full"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["star_email"===y&&"Number of emails to star per profile (starting from the top)","read_email"===y&&"Number of emails to read per profile (starting from the top)","delete_email"===y&&"Number of emails to delete per profile (starting from the top)","reply_to_email"===y&&"Number of emails to reply to from this sender per profile (starting from the most recent)"]})]}),"reply_to_email"===y&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"bulk_search_from",children:"Search From Email"}),(0,r.jsx)(d.I,{id:"bulk_search_from",type:"email",value:N.searchFrom,onChange:e=>_({...N,searchFrom:e.target.value}),placeholder:"sender@example.com",className:"w-full",required:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"The app will search for emails from this sender and reply to them"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"bulk_reply_message",children:"Reply Message"}),(0,r.jsx)(p.g,{id:"bulk_reply_message",value:N.replyMessage,onChange:e=>_({...N,replyMessage:e.target.value}),placeholder:"Your reply message...",className:"w-full min-h-24",required:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"This message will be sent as a reply"})]})]}),"report_to_inbox"===y&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"bulk_report_search_query",children:"Search Query"}),(0,r.jsx)(d.I,{id:"bulk_report_search_query",type:"text",value:w,onChange:e=>k(e.target.value),placeholder:"e.g., from:sender@example.com OR subject:Important",className:"w-full",required:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:'Enter a search query to find the email in spam. Use Gmail search syntax like "from:sender@example.com" or "subject:keyword". The first matching email will be reported as "not spam" and moved to inbox.'})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.X,{id:"sequential_mode",checked:E,onCheckedChange:e=>z(e)}),(0,r.jsx)(i._,{htmlFor:"sequential_mode",className:"font-normal",children:"Open profiles sequentially (one at a time)"})]}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["When enabled, profiles will open one after another instead of all at once.","login"===y&&R?" Each profile will wait for you to close it before opening the next one.":" Each profile will complete before the next one starts."]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)(i._,{htmlFor:"folder_filter",children:[(0,r.jsx)(m.Z,{className:"inline-block mr-2 h-4 w-4"}),"Filter by Folder"]}),(0,r.jsxs)("select",{id:"folder_filter",value:M,onChange:e=>{P(e.target.value),g([])},className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",children:[(0,r.jsxs)("option",{value:"all",children:["All Folders (",(null==h?void 0:h.length)||0," profiles)"]}),q.map(e=>(0,r.jsxs)("option",{value:e,children:[e," (",(null==h?void 0:h.filter(t=>(t.folder_name||"No Folder")===e).length)||0," profiles)"]},e))]}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Filter profiles by folder to easily select profiles from specific teams or groups"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)(i._,{children:["Select Profiles (",x.length," selected)"]}),(0,r.jsx)(l.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{x.length===(null==A?void 0:A.length)?g([]):g((null==A?void 0:A.map(e=>e.id))||[])},children:x.length===(null==A?void 0:A.length)?"Deselect All":"Select All"})]}),(0,r.jsxs)("div",{className:"max-h-64 space-y-2 overflow-y-auto rounded-md border border-input p-4",children:[null==A?void 0:A.map(e=>(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(c.X,{id:e.id,checked:x.includes(e.id),onCheckedChange:()=>O(e.id)}),(0,r.jsxs)("label",{htmlFor:e.id,className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[e.profile_name," ",e.gmail_email&&"(".concat(e.gmail_email,")"),e.folder_name&&(0,r.jsxs)("span",{className:"ml-2 text-xs text-muted-foreground",children:["(",e.folder_name,")"]})]})]},e.id)),(null==A?void 0:A.length)===0&&(0,r.jsx)("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No profiles in this folder"})]})]})]}),(0,r.jsxs)(o.cN,{children:[(0,r.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,r.jsx)(l.z,{type:"submit",disabled:s||0===x.length,children:s?"Creating...":"Create ".concat(x.length," Tasks")})]})]})})]})}},6647:function(e,t,s){"use strict";s.d(t,{CreateTaskDialog:function(){return h}});var r=s(7437),a=s(2265),n=s(5108),l=s(2869),o=s(6110),i=s(6815),d=s(5186),c=s(9397),u=s(3247),m=s(401),p=s(6818),f=s(4508);function h(){let[e,t]=(0,a.useState)(!1),[s,h]=(0,a.useState)(!1),[x,g]=(0,a.useState)(""),[y,j]=(0,a.useState)(!1),{profiles:v}=(0,n.nw)(1,1e3,void 0,x),[b,N]=(0,a.useState)({profile_id:"",task_type:"login",config:{}}),_=null==v?void 0:v.find(e=>e.id===b.profile_id),[w,k]=(0,a.useState)(1),[S,C]=(0,a.useState)(10),[T,F]=(0,a.useState)({searchFrom:"",replyMessage:""}),[E,z]=(0,a.useState)(""),R=["star_email","read_email","delete_email","reply_to_email"].includes(b.task_type),I=async e=>{e.preventDefault(),h(!0);try{let e={...b.config};R&&(e.count=w),"login"===b.task_type&&(e.duration=S),"reply_to_email"===b.task_type&&(e={...e,searchFrom:T.searchFrom,replyMessage:T.replyMessage}),"report_to_inbox"===b.task_type&&(e={...e,search_query:E});let s=await fetch("/api/tasks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...b,config:e})});if(!s.ok){let e=await s.json();throw Error(e.error||"Failed to create task")}t(!1),N({profile_id:"",task_type:"login",config:{}}),k(1),C(10),F({searchFrom:"",replyMessage:""}),z(""),window.location.reload()}catch(e){console.error("[v0] Error creating task:",e),alert("Failed to create task: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{h(!1)}};return(0,r.jsxs)(o.Vq,{open:e,onOpenChange:t,children:[(0,r.jsx)(o.hg,{asChild:!0,children:(0,r.jsxs)(l.z,{children:[(0,r.jsx)(c.Z,{className:"mr-2 h-4 w-4"}),"Create Task"]})}),(0,r.jsx)(o.cZ,{className:"max-w-2xl",children:(0,r.jsxs)("form",{onSubmit:I,children:[(0,r.jsxs)(o.fK,{children:[(0,r.jsx)(o.$N,{children:"Create Automation Task"}),(0,r.jsx)(o.Be,{children:"Schedule a new automation task for a profile"})]}),(0,r.jsxs)("div",{className:"space-y-4 py-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"profile",children:"Profile"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(u.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(d.I,{type:"text",placeholder:"Search by profile name or folder...",value:x,onChange:e=>{g(e.target.value),j(!0)},onFocus:()=>j(!0),className:"pl-9"})]}),_&&!y&&(0,r.jsxs)("div",{className:"mt-2 rounded-md border border-input bg-muted px-3 py-2 text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:_.profile_name}),_.folder_name&&"No Folder"!==_.folder_name&&(0,r.jsxs)("span",{className:"text-muted-foreground",children:[" (",_.folder_name,")"]})]}),y&&v&&v.length>0&&(0,r.jsx)("div",{className:"absolute z-50 mt-1 max-h-60 w-full overflow-auto rounded-md border bg-popover shadow-md",children:v.map(e=>(0,r.jsxs)("button",{type:"button",onClick:()=>{N({...b,profile_id:e.id}),j(!1),g("")},className:(0,f.cn)("flex w-full items-center gap-2 px-3 py-2 text-left text-sm hover:bg-accent",b.profile_id===e.id&&"bg-accent"),children:[b.profile_id===e.id&&(0,r.jsx)(m.Z,{className:"h-4 w-4"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("span",{className:"font-medium",children:e.profile_name}),e.folder_name&&"No Folder"!==e.folder_name&&(0,r.jsxs)("span",{className:"text-muted-foreground",children:[" (",e.folder_name,")"]})]})]},e.id))}),y&&v&&0===v.length&&x&&(0,r.jsx)("div",{className:"absolute z-50 mt-1 w-full rounded-md border bg-popover p-3 text-sm text-muted-foreground shadow-md",children:"No profiles found"})]}),(0,r.jsx)("input",{type:"hidden",name:"profile_id",value:b.profile_id,required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"task_type",children:"Task Type"}),(0,r.jsxs)("select",{id:"task_type",value:b.task_type,onChange:e=>N({...b,task_type:e.target.value}),className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",required:!0,children:[(0,r.jsx)("option",{value:"login",children:"Login to Gmail"}),(0,r.jsx)("option",{value:"check_gmail_status",children:"Check Gmail Status"}),(0,r.jsx)("option",{value:"check_inbox",children:"Check Inbox"}),(0,r.jsx)("option",{value:"read_email",children:"Read Email"}),(0,r.jsx)("option",{value:"star_email",children:"Star Email"}),(0,r.jsx)("option",{value:"send_email",children:"Send Email"}),(0,r.jsx)("option",{value:"reply_to_email",children:"Reply to Email from Sender"}),(0,r.jsx)("option",{value:"report_to_inbox",children:"Report to Inbox (from Spam)"})]})]}),R&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"action_count",children:"Number of Actions"}),(0,r.jsx)(d.I,{id:"action_count",type:"number",min:"1",max:"50",value:w,onChange:e=>k(Number.parseInt(e.target.value)||1),placeholder:"How many emails to process",className:"w-full"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:["star_email"===b.task_type&&"Number of emails to star (starting from the top)","read_email"===b.task_type&&"Number of emails to read (starting from the top)","delete_email"===b.task_type&&"Number of emails to delete (starting from the top)","reply_to_email"===b.task_type&&"Number of emails to reply to from this sender (starting from the most recent)"]})]}),"login"===b.task_type&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"login_duration",children:"Keep Profile Open (seconds)"}),(0,r.jsx)(d.I,{id:"login_duration",type:"number",min:"5",max:"300",value:S,onChange:e=>C(Number.parseInt(e.target.value)||10),placeholder:"Duration in seconds",className:"w-full"}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"How long to keep the profile open before automatically closing (5-300 seconds)"})]}),"reply_to_email"===b.task_type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"search_from",children:"Sender Name"}),(0,r.jsx)(d.I,{id:"search_from",type:"text",value:T.searchFrom,onChange:e=>F({...T,searchFrom:e.target.value}),placeholder:"e.g., Temu, Google, AliExpress",className:"w-full",required:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enter the sender name (not email address). The app will search for emails from this sender and reply to them."})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"reply_message",children:"Reply Message"}),(0,r.jsx)(p.g,{id:"reply_message",value:T.replyMessage,onChange:e=>F({...T,replyMessage:e.target.value}),placeholder:"Your reply message...",className:"w-full min-h-24",required:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"This message will be sent as a reply"})]})]}),"report_to_inbox"===b.task_type&&(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i._,{htmlFor:"report_search_query",children:"Search Query"}),(0,r.jsx)(d.I,{id:"report_search_query",type:"text",value:E,onChange:e=>z(e.target.value),placeholder:"e.g., from:sender@example.com OR subject:Important",className:"w-full",required:!0}),(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:'Enter a search query to find the email in spam. Use Gmail search syntax like "from:sender@example.com" or "subject:keyword". The first matching email will be reported as "not spam" and moved to inbox.'})]})]}),(0,r.jsxs)(o.cN,{children:[(0,r.jsx)(l.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,r.jsx)(l.z,{type:"submit",disabled:s,children:s?"Creating...":"Create Task"})]})]})})]})}},9147:function(e,t,s){"use strict";s.d(t,{TaskList:function(){return w}});var r=s(7437),a=s(2265),n=s(7086),l=s(5974),o=s(2869),i=s(5186),d=s(3578),c=s(3247),u=s(1047),m=s(1817);let p=(0,s(9205).Z)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var f=s(1641),h=s(9322),x=s(8930),g=s(1800),y=s(7054),j=s(1098),v=s(2255),b=s(5153);let N=e=>fetch(e).then(e=>e.json()),_={pending:"bg-yellow-500",running:"bg-blue-500",completed:"bg-green-500",failed:"bg-red-500"};function w(){let[e,t]=(0,a.useState)("all"),[s,w]=(0,a.useState)(""),[k,S]=(0,a.useState)(new Set),[C,T]=(0,a.useState)(),[F,E]=(0,a.useState)(),[z,R]=(0,a.useState)(!1),[I,M]=(0,a.useState)(!1),{toast:P}=(0,b.pm)(),{data:D,isLoading:q,mutate:A}=(0,n.ZP)((()=>{let t=new URLSearchParams;return"all"!==e&&t.append("status",e),t.append("limit","100"),s&&t.append("search",s),C&&t.append("date_from",C.toISOString()),F&&t.append("date_to",F.toISOString()),"/api/tasks?".concat(t.toString())})(),N,{refreshInterval:5e3}),O=async e=>{if(confirm("Are you sure you want to delete this task?"))try{await fetch("/api/tasks/".concat(e),{method:"DELETE"}),A()}catch(e){console.error("[v0] Error deleting task:",e)}},Z=async()=>{if(0===k.size){P({title:"No tasks selected",description:"Please select tasks to retry",variant:"destructive"});return}R(!0);try{let e=await fetch("/api/tasks/retry",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({task_ids:Array.from(k)})}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to retry tasks");P({title:"Tasks retried",description:"".concat(t.count," task(s) have been reset to pending status")}),S(new Set),A()}catch(e){console.error("[v0] Error retrying tasks:",e),P({title:"Error",description:e.message||"Failed to retry tasks",variant:"destructive"})}finally{R(!1)}},L=async()=>{if(confirm("Are you sure you want to stop all running tasks?")){M(!0);try{let e=await fetch("/api/tasks/stop-running",{method:"POST"}),t=await e.json();if(!e.ok)throw Error(t.error||"Failed to stop tasks");P({title:"Tasks stopped",description:t.message||"Running tasks have been stopped"}),A()}catch(e){console.error("[v0] Error stopping tasks:",e),P({title:"Error",description:e.message||"Failed to stop tasks",variant:"destructive"})}finally{M(!1)}}},U=e=>{let t=new Set(k);t.has(e)?t.delete(e):t.add(e),S(t)},V=null==D?void 0:D.tasks,B=null==V?void 0:V.some(e=>"running"===e.status);return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"relative flex-1",children:[(0,r.jsx)(c.Z,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,r.jsx)(i.I,{placeholder:"Search by profile name or folder...",value:s,onChange:e=>w(e.target.value),className:"pl-9"})]}),(0,r.jsxs)(y.J2,{children:[(0,r.jsx)(y.xo,{asChild:!0,children:(0,r.jsxs)(o.z,{variant:"outline",className:"w-[240px] justify-start text-left font-normal bg-transparent",children:[(0,r.jsx)(u.Z,{className:"mr-2 h-4 w-4"}),C?F?(0,r.jsxs)(r.Fragment,{children:[(0,v.WU)(C,"MMM dd")," - ",(0,v.WU)(F,"MMM dd")]}):(0,v.WU)(C,"MMM dd, yyyy"):(0,r.jsx)("span",{children:"Filter by date"})]})}),(0,r.jsx)(y.yk,{className:"w-auto p-0",align:"end",children:(0,r.jsxs)("div",{className:"p-3 space-y-2",children:[(0,r.jsx)("div",{className:"text-sm font-medium",children:"From Date"}),(0,r.jsx)(j.f,{mode:"single",selected:C,onSelect:T}),(0,r.jsx)("div",{className:"text-sm font-medium mt-2",children:"To Date"}),(0,r.jsx)(j.f,{mode:"single",selected:F,onSelect:E}),(0,r.jsx)("div",{className:"flex gap-2 pt-2",children:(0,r.jsx)(o.z,{size:"sm",variant:"outline",onClick:()=>{T(void 0),E(void 0)},className:"flex-1",children:"Clear"})})]})})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(o.z,{variant:"all"===e?"default":"outline",size:"sm",onClick:()=>t("all"),children:"All"}),(0,r.jsx)(o.z,{variant:"pending"===e?"default":"outline",size:"sm",onClick:()=>t("pending"),children:"Pending"}),(0,r.jsx)(o.z,{variant:"running"===e?"default":"outline",size:"sm",onClick:()=>t("running"),children:"Running"}),(0,r.jsx)(o.z,{variant:"completed"===e?"default":"outline",size:"sm",onClick:()=>t("completed"),children:"Completed"}),(0,r.jsx)(o.z,{variant:"failed"===e?"default":"outline",size:"sm",onClick:()=>t("failed"),children:"Failed"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[k.size>0&&(0,r.jsx)(o.z,{size:"sm",onClick:Z,disabled:z,children:z?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Retrying..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{className:"mr-2 h-4 w-4"}),"Retry Selected (",k.size,")"]})}),B&&(0,r.jsx)(o.z,{size:"sm",variant:"destructive",onClick:L,disabled:I,children:I?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Stopping..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.Z,{className:"mr-2 h-4 w-4"}),"Stop Running Tasks"]})})]})]}),(0,r.jsx)("div",{className:"rounded-md border",children:(0,r.jsxs)(d.iA,{children:[(0,r.jsx)(d.xD,{children:(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.ss,{className:"w-[50px]",children:(0,r.jsx)(g.X,{checked:V&&V.length>0&&k.size===V.length,onCheckedChange:()=>{V&&(k.size===V.length?S(new Set):S(new Set(V.map(e=>e.id))))}})}),(0,r.jsx)(d.ss,{children:"Task Type"}),(0,r.jsx)(d.ss,{children:"Profile Name"}),(0,r.jsx)(d.ss,{children:"Folder"}),(0,r.jsx)(d.ss,{children:"Status"}),(0,r.jsx)(d.ss,{children:"Scheduled"}),(0,r.jsx)(d.ss,{children:"Duration"}),(0,r.jsx)(d.ss,{className:"w-[100px]",children:"Actions"})]})}),(0,r.jsx)(d.RM,{children:q?(0,r.jsx)(d.SC,{children:(0,r.jsx)(d.pj,{colSpan:8,className:"text-center text-muted-foreground",children:"Loading tasks..."})}):V&&V.length>0?V.map(e=>(0,r.jsxs)(d.SC,{children:[(0,r.jsx)(d.pj,{children:(0,r.jsx)(g.X,{checked:k.has(e.id),onCheckedChange:()=>U(e.id)})}),(0,r.jsx)(d.pj,{className:"font-medium",children:e.task_type}),(0,r.jsx)(d.pj,{className:"text-muted-foreground",children:e.profile_name||"Unknown"}),(0,r.jsx)(d.pj,{className:"text-muted-foreground text-sm",children:e.folder_name||"-"}),(0,r.jsx)(d.pj,{children:(0,r.jsx)(l.C,{className:_[e.status],children:e.status})}),(0,r.jsx)(d.pj,{children:e.scheduled_at?new Date(e.scheduled_at).toLocaleString():"-"}),(0,r.jsx)(d.pj,{children:e.started_at&&e.completed_at?"".concat(Math.round((new Date(e.completed_at).getTime()-new Date(e.started_at).getTime())/1e3),"s"):"-"}),(0,r.jsx)(d.pj,{children:(0,r.jsxs)("div",{className:"flex gap-2",children:["failed"===e.status&&e.error_message&&(0,r.jsx)(o.z,{variant:"ghost",size:"icon",title:e.error_message,onClick:()=>{console.log("[v0] Task error details:",{taskId:e.id,taskType:e.task_type,profileName:e.profile_name,error:e.error_message,scheduledAt:e.scheduled_at,startedAt:e.started_at,completedAt:e.completed_at}),alert("Error: ".concat(e.error_message))},children:(0,r.jsx)(h.Z,{className:"h-4 w-4 text-red-500"})}),(0,r.jsx)(o.z,{variant:"ghost",size:"icon",onClick:()=>O(e.id),children:(0,r.jsx)(x.Z,{className:"h-4 w-4"})})]})})]},e.id)):(0,r.jsx)(d.SC,{children:(0,r.jsx)(d.pj,{colSpan:8,className:"text-center text-muted-foreground",children:"No tasks found"})})})]})})]})}},5974:function(e,t,s){"use strict";s.d(t,{C:function(){return o}});var r=s(7437);s(2265);var a=s(535),n=s(4508);let l=(0,a.j)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:s,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)(l({variant:s}),t),...a})}},2869:function(e,t,s){"use strict";s.d(t,{z:function(){return d}});var r=s(7437),a=s(2265),n=s(7053),l=s(535),o=s(4508);let i=(0,l.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,t)=>{let{className:s,variant:a,size:l,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,r.jsx)(u,{className:(0,o.cn)(i({variant:a,size:l,className:s})),ref:t,...c})});d.displayName="Button"},1098:function(e,t,s){"use strict";s.d(t,{f:function(){return l}});var r=s(7437);s(2265);var a=s(4947),n=s(4508);function l(e){let{className:t,classNames:s,showOutsideDays:l=!0,...o}=e;return(0,r.jsx)(a._,{showOutsideDays:l,className:(0,n.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100 text-muted-foreground",table:"w-full border-collapse space-y-1",head_row:"flex justify-between text-muted-foreground text-[0.8rem]",head_cell:"w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"relative p-0 text-center text-sm focus-within:relative focus-within:z-20",day:(0,n.cn)("h-9 w-9 p-0 font-normal aria-selected:opacity-100","hover:bg-accent hover:text-accent-foreground focus:outline-none"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},...o})}s(9590)},6070:function(e,t,s){"use strict";s.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return l},aY:function(){return c},ll:function(){return i}});var r=s(7437),a=s(2265),n=s(4508);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",s),...a})});l.displayName="Card";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s),...a})});o.displayName="CardHeader";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("font-semibold leading-none tracking-tight",s),...a})});i.displayName="CardTitle";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",s),...a})});d.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",s),...a})});c.displayName="CardContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",s),...a})}).displayName="CardFooter"},1800:function(e,t,s){"use strict";s.d(t,{X:function(){return i}});var r=s(7437),a=s(2265),n=s(9270),l=s(401),o=s(4508);let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.fC,{ref:t,className:(0,o.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",s),...a,children:(0,r.jsx)(n.z$,{className:(0,o.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(l.Z,{className:"h-4 w-4"})})})});i.displayName=n.fC.displayName},6110:function(e,t,s){"use strict";s.d(t,{$N:function(){return h},Be:function(){return x},Vq:function(){return i},cN:function(){return f},cZ:function(){return m},fK:function(){return p},hg:function(){return d}});var r=s(7437),a=s(2265),n=s(9027),l=s(2489),o=s(4508);let i=n.fC,d=n.xz,c=n.h_;n.x8;let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a})});u.displayName=n.aV.displayName;let m=a.forwardRef((e,t)=>{let{className:s,children:a,...i}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(n.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...i,children:[a,(0,r.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.Z,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});m.displayName=n.VY.displayName;let p=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...s})};p.displayName="DialogHeader";let f=e=>{let{className:t,...s}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};f.displayName="DialogFooter";let h=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",s),...a})});h.displayName=n.Dx.displayName;let x=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",s),...a})});x.displayName=n.dk.displayName},5186:function(e,t,s){"use strict";s.d(t,{I:function(){return l}});var r=s(7437),a=s(2265),n=s(4508);let l=a.forwardRef((e,t)=>{let{className:s,type:a,...l}=e;return(0,r.jsx)("input",{type:a,className:(0,n.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...l})});l.displayName="Input"},6815:function(e,t,s){"use strict";s.d(t,{_:function(){return d}});var r=s(7437),a=s(2265),n=s(6394),l=s(535),o=s(4508);let i=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.f,{ref:t,className:(0,o.cn)(i(),s),...a})});d.displayName=n.f.displayName},7054:function(e,t,s){"use strict";s.d(t,{J2:function(){return o},xo:function(){return i},yk:function(){return d}});var r=s(7437),a=s(2265),n=s(7312),l=s(4508);let o=e=>(0,r.jsx)(n.fC,{...e}),i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.xz,{ref:t,className:(0,l.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2",s),...a})});i.displayName="PopoverTrigger";let d=a.forwardRef((e,t)=>{let{className:s,align:a="center",sideOffset:o=8,inset:i=!1,...d}=e;return(0,r.jsx)(n.h_,{children:(0,r.jsx)(n.VY,{ref:t,align:a,sideOffset:o,className:(0,l.cn)("z-50 w-auto max-w-sm rounded-lg border bg-white p-3 text-sm shadow-md animate-in data-[state=open]:fade-in data-[state=open]:zoom-in",i?"-translate-y-1/2":"",s),...d})})});d.displayName="PopoverContent",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)(n.x8,{ref:t,className:(0,l.cn)("absolute top-2 right-2 rounded-md p-1 text-sm",s),...a})}).displayName="PopoverClose"},3578:function(e,t,s){"use strict";s.d(t,{RM:function(){return i},SC:function(){return d},iA:function(){return l},pj:function(){return u},ss:function(){return c},xD:function(){return o}});var r=s(7437),a=s(2265),n=s(4508);let l=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",s),...a})})});l.displayName="Table";let o=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",s),...a})});o.displayName="TableHeader";let i=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",s),...a})});i.displayName="TableBody",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",s),...a})}).displayName="TableFooter";let d=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",s),...a})});d.displayName="TableRow";let c=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("th",{ref:t,className:(0,n.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})});c.displayName="TableHead";let u=a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("td",{ref:t,className:(0,n.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",s),...a})});u.displayName="TableCell",a.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,r.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",s),...a})}).displayName="TableCaption"},6818:function(e,t,s){"use strict";s.d(t,{g:function(){return a}});var r=s(7437);let a=(0,s(2265).forwardRef)((e,t)=>{let{label:s,className:a="",...n}=e;return(0,r.jsxs)("div",{className:"flex flex-col w-full",children:[s&&(0,r.jsx)("label",{className:"mb-1 text-sm font-medium",children:s}),(0,r.jsx)("textarea",{ref:t,className:"border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(a),...n})]})});a.displayName="Textarea"},5153:function(e,t,s){"use strict";s.d(t,{pm:function(){return m}});var r=s(2265);let a=0,n=new Map,l=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=o(d,e),i.forEach(e=>{e(d)})}function u(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString();return c({type:"ADD_TOAST",toast:{...t,id:s}}),{id:s,dismiss:()=>c({type:"DISMISS_TOAST",toastId:s}),update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},5108:function(e,t,s){"use strict";s.d(t,{nw:function(){return n}});var r=s(7086);let a=e=>fetch(e).then(e=>e.json());function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,s=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,l=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,i=new URLSearchParams({page:e.toString(),limit:t.toString(),...s&&{status:s},...n&&{search:n},...l&&{gmailStatus:l},...o&&{folder:o}}),{data:d,error:c,isLoading:u,mutate:m}=(0,r.ZP)("/api/profiles?".concat(i),a,{refreshInterval:5e3});return{profiles:null==d?void 0:d.profiles,total:null==d?void 0:d.total,totalPages:null==d?void 0:d.totalPages,isLoading:u,error:c,mutate:m}}},4508:function(e,t,s){"use strict";s.d(t,{cn:function(){return n}});var r=s(1994),a=s(3335);function n(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return(0,a.m6)((0,r.W)(t))}},1641:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("CircleStop",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{x:"9",y:"9",width:"6",height:"6",rx:"1",key:"1ssd4o"}]])},1817:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});let r=(0,s(9205).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},9270:function(e,t,s){"use strict";s.d(t,{fC:function(){return w},z$:function(){return k}});var r=s(2265),a=s(8575),n=s(3966),l=s(6741),o=s(886),i=s(6718),d=s(420),c=s(1599),u=s(6840),m=s(7437),p="Checkbox",[f,h]=(0,n.b)(p),[x,g]=f(p),y=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,name:n,checked:i,defaultChecked:d,required:c,disabled:p,value:f="on",onCheckedChange:h,form:g,...y}=e,[j,v]=r.useState(null),w=(0,a.e)(t,e=>v(e)),k=r.useRef(!1),S=!j||g||!!j.closest("form"),[C=!1,T]=(0,o.T)({prop:i,defaultProp:d,onChange:h}),F=r.useRef(C);return r.useEffect(()=>{let e=null==j?void 0:j.form;if(e){let t=()=>T(F.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[j,T]),(0,m.jsxs)(x,{scope:s,state:C,disabled:p,children:[(0,m.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":N(C)?"mixed":C,"aria-required":c,"data-state":_(C),"data-disabled":p?"":void 0,disabled:p,value:f,...y,ref:w,onKeyDown:(0,l.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,l.M)(e.onClick,e=>{T(e=>!!N(e)||!e),S&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),S&&(0,m.jsx)(b,{control:j,bubbles:!k.current,name:n,value:f,checked:C,required:c,disabled:p,form:g,style:{transform:"translateX(-100%)"},defaultChecked:!N(d)&&d})]})});y.displayName=p;var j="CheckboxIndicator",v=r.forwardRef((e,t)=>{let{__scopeCheckbox:s,forceMount:r,...a}=e,n=g(j,s);return(0,m.jsx)(c.z,{present:r||N(n.state)||!0===n.state,children:(0,m.jsx)(u.WV.span,{"data-state":_(n.state),"data-disabled":n.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});v.displayName=j;var b=e=>{let{control:t,checked:s,bubbles:a=!0,defaultChecked:n,...l}=e,o=r.useRef(null),c=(0,i.D)(s),u=(0,d.t)(t);r.useEffect(()=>{let e=o.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==s&&t){let r=new Event("click",{bubbles:a});e.indeterminate=N(s),t.call(e,!N(s)&&s),e.dispatchEvent(r)}},[c,s,a]);let p=r.useRef(!N(s)&&s);return(0,m.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:null!=n?n:p.current,...l,tabIndex:-1,ref:o,style:{...e.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function N(e){return"indeterminate"===e}function _(e){return N(e)?"indeterminate":e?"checked":"unchecked"}var w=y,k=v},6718:function(e,t,s){"use strict";s.d(t,{D:function(){return a}});var r=s(2265);function a(e){let t=r.useRef({value:e,previous:e});return r.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}}},function(e){e.O(0,[454,137,285,705,470,568,971,117,744],function(){return e(e.s=8093)}),_N_E=e.O()}]);